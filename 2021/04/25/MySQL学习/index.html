<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="/images/icons/favicon-16x16.png?v=2.1.1" type="image/png" sizes="16x16"><link rel="icon" href="/images/icons/favicon-32x32.png?v=2.1.1" type="image/png" sizes="32x32"><meta name="description" content="MySQL                           1.数据库                           1.1数据库（DB，DateBase）       概念：是数据仓库，是软件，安装在操作系统上，SQL可以存储大量的数据 作用：存储数据，管理数据">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL学习">
<meta property="og:url" content="https://kingsirz123.github.io/2021/04/25/MySQL%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="源一先生">
<meta property="og:description" content="MySQL                           1.数据库                           1.1数据库（DB，DateBase）       概念：是数据仓库，是软件，安装在操作系统上，SQL可以存储大量的数据 作用：存储数据，管理数据">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://kingsirz123.github.io/2021/04/25/MySQL%E5%AD%A6%E4%B9%A0/1.png">
<meta property="og:image" content="https://kingsirz123.github.io/2021/04/25/MySQL%E5%AD%A6%E4%B9%A0/2.png">
<meta property="og:image" content="https://kingsirz123.github.io/2021/04/25/MySQL%E5%AD%A6%E4%B9%A0/5.png">
<meta property="og:image" content="https://kingsirz123.github.io/2021/04/25/MySQL%E5%AD%A6%E4%B9%A0/6.png">
<meta property="article:published_time" content="2021-04-25T02:33:41.465Z">
<meta property="article:modified_time" content="2021-05-18T02:05:39.818Z">
<meta property="article:author" content="源一">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://kingsirz123.github.io/2021/04/25/MySQL%E5%AD%A6%E4%B9%A0/1.png"><title>MySQL学习 | 源一先生</title><link ref="canonical" href="https://kingsirz123.github.io/2021/04/25/MySQL%E5%AD%A6%E4%B9%A0/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.1.1"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 4.2.1"></head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">Home</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">Archives</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">Categories</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">Tags</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title">源一先生</div><div class="header-banner-info__subtitle"></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">MySQL学习</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2021-04-25</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2021-05-18</span></span></div></header><div class="post-body"><hr>

        <h1 id="MySQL"   >
          <a href="#MySQL" class="heading-link"><i class="fas fa-link"></i></a>MySQL</h1>
      
        <h2 id="1-数据库"   >
          <a href="#1-数据库" class="heading-link"><i class="fas fa-link"></i></a>1.数据库</h2>
      
        <h3 id="1-1数据库（DB，DateBase）"   >
          <a href="#1-1数据库（DB，DateBase）" class="heading-link"><i class="fas fa-link"></i></a>1.1数据库（DB，DateBase）</h3>
      <p>概念：是数据仓库，是软件，安装在操作系统上，SQL可以存储大量的数据</p>
<p>作用：存储数据，管理数据</p>
<a id="more"></a>


        <h3 id="1-2-数据库分类"   >
          <a href="#1-2-数据库分类" class="heading-link"><i class="fas fa-link"></i></a>1.2 数据库分类</h3>
      
        <h4 id="关系型数据库：（SQL）"   >
          <a href="#关系型数据库：（SQL）" class="heading-link"><i class="fas fa-link"></i></a>关系型数据库：（SQL）</h4>
      <ul>
<li>MySQL,Oracle,Sql Server,DB2 ,SQLlite</li>
<li>通过<strong>表和表</strong>之间，<strong>行和列之间的关系</strong>进行数据的存储</li>
</ul>

        <h4 id="非关系型数据库：-NoSQL-Not-Only"   >
          <a href="#非关系型数据库：-NoSQL-Not-Only" class="heading-link"><i class="fas fa-link"></i></a>非关系型数据库：(NoSQL) Not Only</h4>
      <ul>
<li>Redis,MongDB</li>
<li>对象存储，通过<strong>对象自身的属性</strong>来决定</li>
</ul>

        <h3 id="1-3-DBMS-数据库管理系统"   >
          <a href="#1-3-DBMS-数据库管理系统" class="heading-link"><i class="fas fa-link"></i></a>1.3 DBMS(数据库管理系统)</h3>
      <ul>
<li>数据库的管理软件，科学有效的管理我们的数据，维护和获取数据</li>
<li>MySQL本质是数据库管理系统</li>
</ul>

        <h3 id="1-4-MySQL"   >
          <a href="#1-4-MySQL" class="heading-link"><i class="fas fa-link"></i></a>1.4 MySQL</h3>
      <p>MySQL是一个<strong>关系型数据库管理系统</strong></p>
<p>前世：瑞典MySQL AB公司</p>
<p>今生：Oracle </p>
<p>MySQL 是最流行的关系型数据库管理系统(RDBMS)之一。</p>
<p>开源的数据库软件</p>
<p>体积小，速度块，成本低</p>
<p>开发中小型网站或者大型网站</p>

        <h3 id="1-5连接数据库"   >
          <a href="#1-5连接数据库" class="heading-link"><i class="fas fa-link"></i></a>1.5连接数据库</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">net <span class="keyword">start</span> mysql</span><br><span class="line">mysql -u root -p<span class="comment">--（注释）连接数据库</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> mysql.user <span class="keyword">set</span> authencation_string(<span class="string">'123456'</span>) <span class="keyword">where</span> <span class="keyword">user</span>=<span class="string">'root'</span> <span class="keyword">and</span> Host = <span class="string">'localhost'</span>;<span class="comment">--修改用户密码</span></span><br><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>;<span class="comment">--刷新权限</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">----------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--所有的语句都是用分号结尾</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">database</span>:<span class="comment">--查看所有的数据库</span></span><br><span class="line"> <span class="keyword">use</span> school<span class="comment">--切换数据库  use+数据库名</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">Database</span> <span class="keyword">changed</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;<span class="comment">--查看数据库中所有的表</span></span><br><span class="line"><span class="keyword">describe</span> student;<span class="comment">--显示数据库中所有表的信息</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> westos;<span class="comment">--创建数据库</span></span><br><span class="line">exit<span class="comment">--退出连接</span></span><br><span class="line"><span class="comment">--单行注释（SQL的本来注释）</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">(sql的多行注释)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></div></figure>

<p><strong>CRUD增删改查</strong></p>
<p><strong>DDL  数据库定义语言</strong></p>
<p><strong>DML 数据库操作语言</strong></p>
<p><strong>DQL 数据库查询语言</strong></p>
<p><strong>DCL 数据库控制语言</strong></p>

        <h2 id="2-操作数据库"   >
          <a href="#2-操作数据库" class="heading-link"><i class="fas fa-link"></i></a>2. 操作数据库</h2>
      <p><strong>mysql关键字不区分大小写</strong></p>

        <h3 id="2-1-操作数据库"   >
          <a href="#2-1-操作数据库" class="heading-link"><i class="fas fa-link"></i></a>2.1 操作数据库</h3>
      <ol>
<li>创建数据库</li>
</ol>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] westos</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>删除数据库</li>
</ol>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> [<span class="keyword">IF</span> <span class="keyword">EXISTS</span>] westos</span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>使用数据库</li>
</ol>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 如果表名或者字段名是一个特殊字符，就需要带``</span></span><br><span class="line"><span class="keyword">USE</span> <span class="string">`school`</span>  <span class="comment">--防止关键字命名冲突</span></span><br></pre></td></tr></table></div></figure>

<ol start="4">
<li>查看数据库</li>
</ol>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">DATABASES</span> <span class="comment">--查看所有的数据库</span></span><br></pre></td></tr></table></div></figure>




        <h3 id="2-2-数据库的列类型"   >
          <a href="#2-2-数据库的列类型" class="heading-link"><i class="fas fa-link"></i></a>2.2 数据库的列类型</h3>
      <ul>
<li><p>数值</p>
<ul>
<li><p>tinyint   十分小的数据          1个字节</p>
</li>
<li><p>smallint  较小的数据            2个字节</p>
</li>
<li><p>mediumint 中等大的数据   3个字节</p>
</li>
<li><p><strong>int           标准的整数            4个字节</strong>      <strong>（常用的）</strong>  </p>
</li>
<li><p>bigint       较大的数据           8个字节</p>
</li>
<li><p>float         浮点数                   4个字节</p>
</li>
<li><p>double     浮点数                  8个字节（精度问题）</p>
</li>
<li><p>decimal   字符串形式的浮点数 （金融计算使用）           </p>
</li>
</ul>
</li>
</ul>
<ul>
<li>字符串<ul>
<li>char  字符串固定大小的   0~255</li>
<li><strong>varchar  可变字符串         0~65535   常用的 String</strong></li>
<li>tinytext    微型文本           2^8-1</li>
<li>text           文本串               2^16-1</li>
</ul>
</li>
</ul>
<ul>
<li>时间日期<ul>
<li>date    YYYY-MM-DD,日期</li>
<li>time    HH:mm:ss,时间格式</li>
<li><strong>datetime   YYYY-MM-DD  HH:mm:ss   最常用的时间格式</strong></li>
<li><strong>timestamp   时间戳  1970.1.1到现在的毫秒数</strong></li>
<li>year 年份表示</li>
</ul>
</li>
</ul>
<ul>
<li>null<ul>
<li>没有值</li>
<li>不要使用NULL进行运算</li>
</ul>
</li>
</ul>

        <h3 id="2-3-数据库的字段属性（重点）"   >
          <a href="#2-3-数据库的字段属性（重点）" class="heading-link"><i class="fas fa-link"></i></a>2.3 数据库的字段属性（重点）</h3>
      <p>unsigned：</p>
<ul>
<li>无符号整数</li>
<li>不能声明为负数</li>
</ul>
<p>zerofill：</p>
<ul>
<li>0填充的</li>
<li>不足的位数用0填充   int(3)      5—005</li>
</ul>
<p>自增：</p>
<ul>
<li>通常理解为自增，自动在上一条记录的基础上+1</li>
<li>通常用来设计唯一的主键   index，必须是整数类型</li>
<li>可以自定义设计自增的起始值和步长</li>
</ul>
<p>非空：NULL not null</p>
<ul>
<li>假设设置为not null ,如果不给它赋值,就会报错!</li>
<li>NUIl ,如果不填写值,默认就是null!</li>
</ul>
<p>默认：</p>
<ul>
<li>设置默认的值!</li>
<li>sex,默认值为男,如果不指定该列的值,则会有默认的值!</li>
</ul>
<p>拓展：</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*每个表,部必须存在以下五个字段!未来做项目用的,表示一个记录存在意义!</span></span><br><span class="line"><span class="comment">id 主键</span></span><br><span class="line"><span class="comment">version 乐观锁</span></span><br><span class="line"><span class="comment">is-delete 伪删除</span></span><br><span class="line"><span class="comment">gmt_create 创建时间</span></span><br><span class="line"><span class="comment">gmt_update 修改时间</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></div></figure>




        <h3 id="2-4创建数据库"   >
          <a href="#2-4创建数据库" class="heading-link"><i class="fas fa-link"></i></a>2.4创建数据库</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 目标：创建一个school数据库</span></span><br><span class="line"><span class="comment">-- 创建学生表（列、字段） 使用SQL 创建</span></span><br><span class="line"><span class="comment">-- 学号int 登陆密码varchar(20) 姓名，性别varchar(2),出生日期（datatime）,家庭住址，email</span></span><br><span class="line"><span class="comment">-- 注意点，只用英文（），表的名称 和 字段 尽量使用`` 括起来</span></span><br><span class="line"><span class="comment">-- AUTO_INCREMENT 自增</span></span><br><span class="line"><span class="comment">-- 字符串使用 单括号括起来！</span></span><br><span class="line"><span class="comment">-- 所有的语句后面加 ,（英文的），最后一个不用加</span></span><br><span class="line"><span class="comment">-- PRIMARY KEY 主键 ，一般一个表只有一个唯一的主键</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> <span class="string">`student`</span> (</span><br><span class="line"><span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="literal">null</span> auto_increment <span class="keyword">comment</span> <span class="string">'学号'</span>,</span><br><span class="line"><span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">30</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">'匿名'</span> <span class="keyword">comment</span> <span class="string">'姓名'</span>,</span><br><span class="line"><span class="string">`pwd`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">'123456'</span> <span class="keyword">comment</span> <span class="string">'密码'</span>,</span><br><span class="line"><span class="string">`sex`</span> <span class="built_in">varchar</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">'女'</span> <span class="keyword">comment</span> <span class="string">'性别'</span>,</span><br><span class="line"><span class="string">`birthday`</span> datetime <span class="keyword">default</span> <span class="literal">null</span> <span class="keyword">comment</span> <span class="string">'出生日期'</span>,</span><br><span class="line"><span class="string">`address`</span> <span class="built_in">varchar</span>(<span class="number">100</span>) <span class="keyword">default</span> <span class="literal">null</span> <span class="keyword">comment</span> <span class="string">'家庭地址'</span>,</span><br><span class="line"><span class="string">`email`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">default</span> <span class="literal">null</span> <span class="keyword">comment</span> <span class="string">'邮箱'</span>,</span><br><span class="line">PRIMARY <span class="keyword">key</span>(<span class="string">`id`</span>)</span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">innodb</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8</span><br></pre></td></tr></table></div></figure>



<p>格式</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>  [<span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span>]表名(</span><br><span class="line"><span class="string">`字段名`</span> 列类型 [属性] [索引] [注释],</span><br><span class="line"><span class="string">`字段名`</span> 列类型 [属性] [索引] [注释],</span><br><span class="line"><span class="string">`字段名`</span> 列类型 [属性] [索引] [注释],</span><br><span class="line">    ......</span><br><span class="line"><span class="string">`字段名`</span> 列类型 [属性] [索引] [注释],</span><br><span class="line"><span class="string">`字段名`</span> 列类型 [属性] [索引] [注释]</span><br><span class="line">)[表类型][字符集设置][注释]</span><br></pre></td></tr></table></div></figure>




        <h3 id="2-5-常用命令"   >
          <a href="#2-5-常用命令" class="heading-link"><i class="fas fa-link"></i></a>2.5 常用命令</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> school <span class="comment">--查看创建数据库的语句</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student <span class="comment">--查看表的定义语句</span></span><br><span class="line"><span class="keyword">DESC</span> student <span class="comment">--显示表的结构</span></span><br></pre></td></tr></table></div></figure>




        <h3 id="2-6-数据表的类型"   >
          <a href="#2-6-数据表的类型" class="heading-link"><i class="fas fa-link"></i></a>2.6 数据表的类型</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INNODB<span class="comment">--默认使用</span></span><br><span class="line">MYISAM<span class="comment">--早些年使用的</span></span><br></pre></td></tr></table></div></figure>

<div class="table-container"><table>
<thead>
<tr>
<th></th>
<th>MYISAM</th>
<th>INNODB</th>
</tr>
</thead>
<tbody><tr>
<td>事务支持</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>数据行锁定</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>外键约束</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>全文索引</td>
<td>支持</td>
<td>不支持（现在最新版也支持了）</td>
</tr>
<tr>
<td>表空间大小</td>
<td>较小</td>
<td>较大，约为两倍</td>
</tr>
</tbody></table></div>
<p>常规使用操作：</p>
<ul>
<li>MYISAM 节约空间，速度较快</li>
<li>INNODB 安全性高，支持事务处理，多表用户操作</li>
</ul>
<blockquote>
<p>在物理空间存在的位置</p>
</blockquote>
<p>所有的数据库文件都存在data目录下，一个文件夹就对应一个数据库</p>
<p>本质还是文件的存储！</p>
<p>MySQL 引擎在物理文件上的区别</p>
<ul>
<li><p>innoDB 在数据库表中只有一个*.frm文件，以及上级目录下的 ibdata1文件</p>
</li>
<li><p>MYUSAM 对应文件</p>
<ul>
<li><p>*.frm 表结构的定义文件</p>
</li>
<li><p>*.MDY 数据文件 （data）</p>
</li>
<li><p>*.MYI 索引文件（index）</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>设置数据库表的字符集编码</p>
</blockquote>
<figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">charset&#x3D;utf8</span><br></pre></td></tr></table></div></figure>

<p>不设置 会是mysql的默认的字符集编码（不支持中文）</p>
<p>在 my.ini中配置默认的编码</p>
<figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">character-set-server&#x3D;utf8</span><br></pre></td></tr></table></div></figure>




        <h3 id="2-6-修改删除表"   >
          <a href="#2-6-修改删除表" class="heading-link"><i class="fas fa-link"></i></a>2.6 修改删除表</h3>
      
        <h4 id="修改"   >
          <a href="#修改" class="heading-link"><i class="fas fa-link"></i></a>修改</h4>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改表名</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">test</span> <span class="keyword">rename</span> <span class="keyword">as</span> tttt</span><br><span class="line"><span class="comment">-- 增加表的字段</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tttt <span class="keyword">add</span> age <span class="built_in">int</span>(<span class="number">11</span>)</span><br><span class="line"><span class="comment">-- 修改表的字段（重命名，修改约束）</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tttt <span class="keyword">modify</span> age <span class="built_in">varchar</span>(<span class="number">11</span>)   <span class="comment">-- 修改约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tttt <span class="keyword">change</span> age age1 <span class="built_in">int</span>(<span class="number">11</span>)  <span class="comment">-- 字段重命名</span></span><br><span class="line"><span class="comment">-- 删除表的字段</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tttt <span class="keyword">drop</span> age1</span><br></pre></td></tr></table></div></figure>

<p>最终结论: </p>
<p><strong>change</strong>用来字段重命名，<strong>不能修改字段类型和约束;</strong></p>
<p><strong>modify不用来字段重命名</strong>,只能修改字段类型和约束:</p>
<blockquote>
<p>删除表</p>
</blockquote>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> tttt</span><br><span class="line"><span class="comment">--删除表的字段</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tttt <span class="keyword">DROP</span> age</span><br></pre></td></tr></table></div></figure>




        <h2 id="3-MySQL数据管理"   >
          <a href="#3-MySQL数据管理" class="heading-link"><i class="fas fa-link"></i></a>3. MySQL数据管理</h2>
      
        <h3 id="3-1-外键"   >
          <a href="#3-1-外键" class="heading-link"><i class="fas fa-link"></i></a>3.1 外键</h3>
      
        <h4 id="方式一、在创建表的时候，增加约束-（麻烦，比较复杂）"   >
          <a href="#方式一、在创建表的时候，增加约束-（麻烦，比较复杂）" class="heading-link"><i class="fas fa-link"></i></a>方式一、在创建表的时候，增加约束 （麻烦，比较复杂）</h4>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`grade`</span> (</span><br><span class="line">  <span class="string">`grade1d`</span> <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'年纪名字'</span>,</span><br><span class="line">  <span class="string">`gradename`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'年级名字'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`grade1d`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line"><span class="comment">-- 学生表的 gradeid 字段 要去引用年级表的grade id</span></span><br><span class="line"><span class="comment">-- 定义外键key </span></span><br><span class="line"><span class="comment">-- 给这个外键添加约束（执行引用）references 引用</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">`student`</span> (</span><br><span class="line"><span class="string">`id`</span> <span class="built_in">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'学号'</span>,</span><br><span class="line"><span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'匿名'</span> <span class="keyword">COMMENT</span> <span class="string">'姓名'</span>,</span><br><span class="line"><span class="string">`pwd`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'123456'</span> <span class="keyword">COMMENT</span> <span class="string">'密码'</span>,</span><br><span class="line"><span class="string">`sex`</span> <span class="built_in">VARCHAR</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'女'</span> <span class="keyword">COMMENT</span> <span class="string">'性别'</span>,</span><br><span class="line"><span class="string">`birthday`</span> DATETIME <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'出生日期'</span>,</span><br><span class="line"><span class="string">`grade1d`</span> <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'年纪名字'</span>,</span><br><span class="line"><span class="string">`address`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'家庭地址'</span>,</span><br><span class="line"><span class="string">`email`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'邮箱'</span>,</span><br><span class="line">PRIMARY <span class="keyword">KEY</span>(<span class="string">`id`</span>)</span><br><span class="line"><span class="keyword">KEY</span> <span class="string">`FK_gradeid`</span> (<span class="string">`gradeid`</span>),</span><br><span class="line"><span class="keyword">CONSTRAINT</span> <span class="string">`FK_gradeid`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`gradeid`</span>) <span class="keyword">REFERENCES</span> <span class="string">`grade`</span> (<span class="string">`gradeid`</span>)</span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br></pre></td></tr></table></div></figure>

<p>删除有外键关系的表，要先删除引用的表（从表），再删除被引用的表（主表）</p>

        <h4 id="方式二、在创建表成功后，增加约束"   >
          <a href="#方式二、在创建表成功后，增加约束" class="heading-link"><i class="fas fa-link"></i></a>方式二、在创建表成功后，增加约束</h4>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表的时候没有外键关系的时候</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`student`</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="string">`FK_gradeid`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`gradeid`</span>) <span class="keyword">REFERENCES</span> <span class="string">`grade`</span> (<span class="string">`gradeid`</span>);</span><br></pre></td></tr></table></div></figure>

<p>以上的操作都是物理外键，数据库级别的外键，不建议使用（避免数据库过多造成困恼）</p>
<p>最佳实践</p>
<ul>
<li>数据库就是单纯的表，只用来存储数据，只有行（数据）和列（字段）</li>
<li>我们想使用多张表的数据，想使用外键（程序去实现）</li>
</ul>

        <h3 id="3-2DML语言（全记）"   >
          <a href="#3-2DML语言（全记）" class="heading-link"><i class="fas fa-link"></i></a>3.2DML语言（全记）</h3>
      <p><strong>数据库的意义</strong>：数据存储，数据管理</p>
<p>DML语言：数据操作语言</p>
<ul>
<li>insert</li>
<li>update</li>
<li>delete</li>
</ul>

        <h3 id="3-3添加"   >
          <a href="#3-3添加" class="heading-link"><i class="fas fa-link"></i></a>3.3添加</h3>
      <p>insert</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 插入语言</span></span><br><span class="line"><span class="comment">-- insert into 表名 ([字段1，字段2，字段3.....]) values('值1'，'值2'，'值3'.....)</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`grade`</span>(<span class="string">`gradename`</span>) <span class="keyword">VALUES</span> (<span class="string">'大二'</span>);</span><br><span class="line"><span class="comment">-- 一般插入语句，数据和字段一定要一一对应</span></span><br><span class="line"><span class="comment">-- 插入多个字段</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`grade`</span>(<span class="string">`gradename`</span>) </span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'大三'</span>),(<span class="string">'大四'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`school`</span>.<span class="string">`student`</span> (<span class="string">`id`</span>, <span class="string">`name`</span>, <span class="string">`pwd`</span>, <span class="string">`sex`</span>) </span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'张三'</span>, <span class="string">'qwertret'</span>, <span class="string">'男'</span>); </span><br><span class="line"><span class="comment">-- 字段可以省略</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`school`</span>.<span class="string">`student`</span> </span><br><span class="line"> <span class="keyword">VALUES</span> (<span class="string">'李四'</span>, <span class="string">'abcdefg'</span>, <span class="string">'2021-04-01 09:35:36'</span>, <span class="string">'武汉'</span>, <span class="string">'abd@123.com'</span>);</span><br></pre></td></tr></table></div></figure>

<p>注意：</p>
<ol>
<li>字段与字段 value与value之间用英文逗号隔开</li>
<li>字段可以省略 但是后面的值必须一一对应并且一个不能少</li>
<li>可以同时插入多条数据，VALUES(),(),…..</li>
</ol>

        <h3 id="3-4修改"   >
          <a href="#3-4修改" class="heading-link"><i class="fas fa-link"></i></a>3.4修改</h3>
      <p>update</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法</span></span><br><span class="line"><span class="comment">-- update 表名 set colnum_name = value where 条件</span></span><br><span class="line"><span class="comment">-- 修改学员的名字</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="string">`student`</span> <span class="keyword">SET</span> <span class="string">`name`</span>=<span class="string">'李小四'</span> <span class="keyword">WHERE</span> <span class="keyword">id</span> = <span class="number">2</span>;</span><br><span class="line"><span class="comment">-- 不指定条件则会改动所有的表！！！</span></span><br><span class="line"><span class="comment">-- 修改多个属性</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="string">`student`</span> <span class="keyword">SET</span> <span class="string">`name`</span>=<span class="string">'李小四'</span>, <span class="string">`email`</span> = <span class="string">'1531857645@qq.com'</span> <span class="keyword">WHERE</span> <span class="keyword">id</span> = <span class="number">2</span>;</span><br></pre></td></tr></table></div></figure>



<p>条件： where 子句 运算符 id等于某个值 大于某个值 在某个区间修改…..</p>
<div class="table-container"><table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
<th>范围</th>
<th>结果</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>=</td>
<td>等于</td>
<td>5=6</td>
<td>false</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;&gt; 或！=</td>
<td>不等于</td>
<td>5&lt;&gt;6</td>
<td>true</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
<td>5&gt;6</td>
<td>false</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
<td>5&lt;6</td>
<td>true</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于等于</td>
<td>5&gt;=6</td>
<td>false</td>
<td></td>
<td></td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于等于</td>
<td>5&lt;=6</td>
<td>true</td>
<td></td>
<td></td>
</tr>
<tr>
<td>BETWEEN… AND …</td>
<td>在某个范围内（闭合区间）</td>
<td>[2,5]</td>
<td>true</td>
<td></td>
<td></td>
</tr>
<tr>
<td>AND</td>
<td>&amp;&amp;</td>
<td>5&gt;1and 1&gt;2</td>
<td>false</td>
<td></td>
<td></td>
</tr>
<tr>
<td>OR</td>
<td>||</td>
<td>||</td>
<td></td>
<td>5&gt;1or 1&gt;2</td>
<td>true</td>
</tr>
</tbody></table></div>
<p>注意:.</p>
<ul>
<li>colnum_name是数据库的列,尽显带上.</li>
<li>条件,筛选的条件,如果没有指定,则会修改所有的列. </li>
<li>value,是一个具体的值,也可以是一个变量·</li>
<li>多个设置的属性之间,使用英文逗号隔开</li>
</ul>

        <h3 id="3-5-删除"   >
          <a href="#3-5-删除" class="heading-link"><i class="fas fa-link"></i></a>3.5 删除</h3>
      <p>delete</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除数据</span></span><br><span class="line"><span class="comment">-- 语法 delete from 表名 where 条件</span></span><br><span class="line"><span class="comment">-- 删除指定数据</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="string">`student`</span></span><br><span class="line"><span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">1</span>;</span><br></pre></td></tr></table></div></figure>



<p>truncate 语句</p>
<p>作用：完全清空一个数据库表，表的结构和索引不会变</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 清空 student 表</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="string">`student`</span>;</span><br></pre></td></tr></table></div></figure>



<ul>
<li>相同点： <strong>都能删除数据，都不会删除表结构</strong></li>
<li>不同：<ul>
<li>truncate <strong>重新设置 自增列 计数器会归零</strong></li>
<li>truncate <strong>不会影响事务</strong></li>
</ul>
</li>
</ul>
<p>了解即可: DELETEH,重启数据库,现象</p>
<ul>
<li>InnoDB 自增列会重1开始(存在内存当中的,断电即失)</li>
<li>MyISAM继续从上一个自增开始(存在文件中的,不会丢失)</li>
</ul>

        <h2 id="4-DQL查询数据（最重点）"   >
          <a href="#4-DQL查询数据（最重点）" class="heading-link"><i class="fas fa-link"></i></a>4.DQL查询数据（最重点）</h2>
      
        <h3 id="4-1-DQL"   >
          <a href="#4-1-DQL" class="heading-link"><i class="fas fa-link"></i></a>4.1 DQL</h3>
      <p>（Data Query LANGUAGEZ: 数据查询语言）</p>
<ul>
<li>所有查询操作都用它 Select</li>
<li>简单、复杂的查询都能</li>
<li><strong>数据库中最核心的语言，最重要的语句</strong></li>
<li>使用频率最高的语言</li>
</ul>

        <h3 id="4-2-SELECT语法"   >
          <a href="#4-2-SELECT语法" class="heading-link"><i class="fas fa-link"></i></a>4.2 SELECT语法</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span> | <span class="keyword">DISTINCT</span>]</span><br><span class="line">&#123;* | table.* | [table.field1[<span class="keyword">as</span> alias1][,table. field2[<span class="keyword">as</span> alias2]][,...]]&#125;</span><br><span class="line"><span class="keyword">FROM</span> table_name [<span class="keyword">as</span> table_alias]</span><br><span class="line">  [<span class="keyword">left</span> | <span class="keyword">right</span> | <span class="keyword">inner</span> <span class="keyword">join</span> table_name2] <span class="comment">--联合查询 </span></span><br><span class="line">  [<span class="keyword">WHERE</span> ..]<span class="comment">--指定结果,满定的条件</span></span><br><span class="line">  [<span class="keyword">GROUP</span> <span class="keyword">BY</span> ..] <span class="comment">--指定结果按照哪几个字段来分组</span></span><br><span class="line">  [<span class="keyword">HAVING</span>] <span class="comment">--过滤分组的记录必须满足的次要条件</span></span><br><span class="line">  [<span class="keyword">ORDER</span> <span class="keyword">BY</span> ..]<span class="comment">--指定查询记录按一个或多个条件排序</span></span><br><span class="line">  [<span class="keyword">LIMIT</span> &#123;[<span class="keyword">offset</span>, ]<span class="keyword">row_count</span> | row_countOFFSET <span class="keyword">offset</span>)];<span class="comment">--指定查询记录从哪条到哪条</span></span><br></pre></td></tr></table></div></figure>






        <h3 id="4-3-指定查询字段"   >
          <a href="#4-3-指定查询字段" class="heading-link"><i class="fas fa-link"></i></a>4.3 指定查询字段</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--查询全部的学生     select 字段 form 表</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="string">`student`</span>;</span><br><span class="line"><span class="comment">-- 查询指定字段</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,<span class="string">`studentname`</span> <span class="keyword">FROM</span> <span class="string">`student`</span>;</span><br><span class="line"><span class="comment">-- 别名，给结果起一个名字 AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span> <span class="keyword">AS</span> 学号,<span class="string">`studentname`</span><span class="keyword">AS</span> 学生姓名 <span class="keyword">FROM</span> student</span><br><span class="line"><span class="comment">-- 函数 concat(a,b)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="string">'姓名：'</span>,<span class="string">`studentname`</span>) <span class="keyword">AS</span> 新名字 <span class="keyword">FROM</span> student</span><br></pre></td></tr></table></div></figure>

<p>语法：select 字段，…… form 表</p>
<p>有的时候，列名字不是见名知意，我们起别名 AS 字段名 as 别名 表名 as 别名</p>

        <h3 id="4-4-去重-distinct"   >
          <a href="#4-4-去重-distinct" class="heading-link"><i class="fas fa-link"></i></a>4.4 去重 distinct</h3>
      <p>作用：去除select查询出来的结果中重复的数据，重复的数据只显示一条</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询一下哪些同学参加了考试有成绩</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br><span class="line"><span class="comment">-- 查询有哪些同学参加了考试</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span> <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br><span class="line"><span class="comment">-- 发现重复数据 去除重复</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="string">`studentno`</span> <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br></pre></td></tr></table></div></figure>




        <h3 id="4-5-数据库的列（表达式）"   >
          <a href="#4-5-数据库的列（表达式）" class="heading-link"><i class="fas fa-link"></i></a>4.5 数据库的列（表达式）</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- 查询系统的版本号 (函数)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">VERSION</span>();</span><br><span class="line"><span class="comment">-- 用来计算   （表达式）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span>*<span class="number">300</span>+<span class="number">1</span> <span class="keyword">AS</span> 计算结果;</span><br><span class="line"><span class="comment">-- 查询自增的步长（变量）</span></span><br><span class="line"><span class="keyword">SELECT</span> @@auto_increment_increment;</span><br><span class="line"><span class="comment">-- 学院考试成绩加一分查看</span></span><br><span class="line"><span class="keyword">SELECT</span><span class="string">`studentno`</span>,<span class="string">`studentresult`</span>+<span class="number">1</span> <span class="keyword">AS</span> <span class="string">'加一分后'</span> <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br></pre></td></tr></table></div></figure>

<p><strong>数据库中的表达式：文本值 ，列 ， Null ，函数 。计算表达式。系统变量…</strong></p>
<p>select 表达式 from 表</p>

        <h3 id="4-6-where-条件子句"   >
          <a href="#4-6-where-条件子句" class="heading-link"><i class="fas fa-link"></i></a>4.6 where 条件子句</h3>
      <p>作用：检索数据中<strong>符合条件</strong>的值</p>
<p>搜索的条件由一个或者多个表达式组成，结果布尔值</p>
<blockquote>
<p>逻辑运算符</p>
</blockquote>
<div class="table-container"><table>
<thead>
<tr>
<th>运算符</th>
<th>语法</th>
<th>描述</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>and &amp;&amp;</td>
<td>a and b a&amp;&amp;b</td>
<td>逻辑与，两个都为真，结果为真</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>or \</td>
<td>\</td>
<td></td>
<td>a or b a\</td>
<td>\</td>
<td>b</td>
<td>逻辑或，其中一个为真则结果为真</td>
</tr>
<tr>
<td>not !</td>
<td>not a !a</td>
<td>逻辑非</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table></div>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- where练习</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,<span class="string">`studentresult`</span> <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br><span class="line"><span class="comment">-- 查询考试成绩在95~100分之间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,<span class="string">`studentresult`</span> <span class="keyword">FROM</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`studentresult`</span>&gt;=<span class="number">95</span> <span class="keyword">AND</span> <span class="string">`studentresult`</span>&lt;=<span class="number">100</span>;</span><br><span class="line"><span class="comment">-- 模糊查询（区间）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,<span class="string">`studentresult`</span> <span class="keyword">FROM</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`studentresult`</span> <span class="keyword">BETWEEN</span> <span class="number">95</span> <span class="keyword">AND</span> <span class="number">100</span>;</span><br><span class="line"><span class="comment">-- 除了1000学号之外的学生的成绩</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,<span class="string">`studentresult`</span> <span class="keyword">FROM</span> <span class="keyword">result</span> </span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="string">`studentno`</span>=<span class="number">1000</span>;</span><br></pre></td></tr></table></div></figure>




        <h3 id="4-7-模糊查询：-比较运算符"   >
          <a href="#4-7-模糊查询：-比较运算符" class="heading-link"><i class="fas fa-link"></i></a>4.7 模糊查询： 比较运算符</h3>
      <div class="table-container"><table>
<thead>
<tr>
<th>运算符</th>
<th>语法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>is null</td>
<td>a is null</td>
<td>如果操作符null 则结果为真</td>
</tr>
<tr>
<td>is not null</td>
<td>a is not null</td>
<td>如果操作符null 则结果为假</td>
</tr>
<tr>
<td>BETWEEN AND</td>
<td>a betweeb b and c</td>
<td>若a 在b和c 之间 则结果为真</td>
</tr>
<tr>
<td><strong>like</strong></td>
<td>a like b</td>
<td>SQL匹配，如果a匹配b,则结果为真</td>
</tr>
<tr>
<td><strong>in</strong></td>
<td>a in (a1,a2,……)</td>
<td>假设a在a1,或者 a2……其中的某一个值中，结果为真</td>
</tr>
</tbody></table></div>
<p><strong>like %多个字符   _一个字符</strong></p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 模糊查询</span></span><br><span class="line"><span class="comment">-- 查询姓张的同学</span></span><br><span class="line"><span class="comment">-- like 操作</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,<span class="string">`studentname`</span> <span class="keyword">FROM</span> <span class="string">`student`</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`studentname`</span> <span class="keyword">LIKE</span> <span class="string">'张%'</span>;</span><br><span class="line"><span class="comment">-- 查询姓张的同学，名字后面只有一个字的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,<span class="string">`studentname`</span> <span class="keyword">FROM</span> <span class="string">`student`</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`studentname`</span> <span class="keyword">LIKE</span> <span class="string">'张_'</span>;</span><br><span class="line"><span class="comment">-- 查询姓张的同学，名字后面只有两个字的</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,<span class="string">`studentname`</span> <span class="keyword">FROM</span> <span class="string">`student`</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`studentname`</span> <span class="keyword">LIKE</span> <span class="string">'张__'</span>;</span><br><span class="line"><span class="comment">-- 查询名字中间有 大字的同学</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,<span class="string">`studentname`</span> <span class="keyword">FROM</span> <span class="string">`student`</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`studentname`</span> <span class="keyword">LIKE</span> <span class="string">'_大_'</span>;</span><br><span class="line"><span class="comment">-- in 操作</span></span><br><span class="line"><span class="comment">-- 查询 1001 1000 学员</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,<span class="string">`studentname`</span> <span class="keyword">FROM</span> <span class="string">`student`</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`studentno`</span> <span class="keyword">IN</span>(<span class="number">1000</span>,<span class="number">1001</span>);</span><br><span class="line"><span class="comment">-- 查询在北京的学生</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,<span class="string">`studentname`</span> <span class="keyword">FROM</span> <span class="string">`student`</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`address`</span> <span class="keyword">IN</span>(<span class="string">'广东深圳'</span>);</span><br><span class="line"><span class="comment">-- null not null 操作</span></span><br><span class="line"><span class="comment">-- 查询地址为空的学生 null</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,<span class="string">`studentname`</span> <span class="keyword">FROM</span> <span class="string">`student`</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`address`</span>=<span class="string">''</span> <span class="keyword">OR</span> address <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></div></figure>




        <h3 id="4-8-联表查询join"   >
          <a href="#4-8-联表查询join" class="heading-link"><i class="fas fa-link"></i></a>4.8 联表查询join</h3>
      <img src="/2021/04/25/MySQL%E5%AD%A6%E4%B9%A0/1.png" class="" title="图片">

<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 联表查询</span></span><br><span class="line"><span class="comment">-- 查询了参加考试的同学（学号、姓名、科目编号、分数）</span></span><br><span class="line"><span class="keyword">SELECT</span> *<span class="keyword">FROM</span> <span class="string">`student`</span></span><br><span class="line"><span class="keyword">SELECT</span> *<span class="keyword">FROM</span> <span class="string">`result`</span></span><br><span class="line"><span class="comment">/*思路：</span></span><br><span class="line"><span class="comment">分析需求，分析查询的字段来自哪些表（连接查询）</span></span><br><span class="line"><span class="comment">确定使用那种连接查询 （7种）</span></span><br><span class="line"><span class="comment">确定交叉点（相同、不相同）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- join on 连接查询</span></span><br><span class="line"><span class="comment">-- where 等值查询</span></span><br><span class="line"><span class="comment">-- INNER JOIN</span></span><br><span class="line"><span class="keyword">SELECT</span> s.<span class="string">`studentno`</span>,<span class="string">`studentname`</span>,<span class="string">`subjectno`</span>,<span class="string">`studentresult`</span> </span><br><span class="line"><span class="keyword">FROM</span> <span class="string">`student`</span><span class="keyword">AS</span> s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span><span class="string">`result`</span><span class="keyword">AS</span> r</span><br><span class="line"><span class="keyword">WHERE</span> r.<span class="string">`studentno`</span> = s.<span class="string">`studentno`</span>;</span><br><span class="line"><span class="comment">-- right join</span></span><br><span class="line"><span class="keyword">SELECT</span> s.<span class="string">`studentno`</span>,<span class="string">`studentname`</span>,<span class="string">`subjectno`</span>,<span class="string">`studentresult`</span> </span><br><span class="line"><span class="keyword">FROM</span> <span class="string">`student`</span><span class="keyword">AS</span> s</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span><span class="string">`result`</span><span class="keyword">AS</span> r</span><br><span class="line"><span class="keyword">ON</span> r.<span class="string">`studentno`</span> = s.<span class="string">`studentno`</span>;</span><br><span class="line"><span class="comment">-- left join</span></span><br><span class="line"><span class="keyword">SELECT</span> s.<span class="string">`studentno`</span>,<span class="string">`studentname`</span>,<span class="string">`subjectno`</span>,<span class="string">`studentresult`</span> </span><br><span class="line"><span class="keyword">FROM</span> <span class="string">`student`</span><span class="keyword">AS</span> s</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span><span class="string">`result`</span><span class="keyword">AS</span> r</span><br><span class="line"><span class="keyword">ON</span> r.<span class="string">`studentno`</span> = s.<span class="string">`studentno`</span>;</span><br></pre></td></tr></table></div></figure>

<div class="table-container"><table>
<thead>
<tr>
<th>操作</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>inner join</td>
<td>如果表中至少有一个匹配，就返回行</td>
</tr>
<tr>
<td>right join</td>
<td>会从左表中返回所有的值，即使右表中没有匹配</td>
</tr>
<tr>
<td>left join</td>
<td>会从右表中返回所有的值，即使左表中没有匹配</td>
</tr>
</tbody></table></div>
<ul>
<li>left join(左联接) 返回包括左表中的所有记录和右表中联结字段相等的记录 ，右表没有就会显示空</li>
<li>right join(右联接) 返回包括右表中的所有记录和左表中联结字段相等的记录,左表没有就会显示空</li>
<li>inner join(等值连接) 只返回两个表中联结字段相等的行，只返回符合条件的</li>
</ul>

        <h3 id="4-9-自连接"   >
          <a href="#4-9-自连接" class="heading-link"><i class="fas fa-link"></i></a>4.9 自连接</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">--创建测试的表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`school`</span>.<span class="string">`category`</span>( <span class="string">`categoryid`</span> <span class="built_in">INT</span>(<span class="number">3</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'id'</span>, <span class="string">`pid`</span> <span class="built_in">INT</span>(<span class="number">3</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'父id 没有父则为1'</span>, <span class="string">`categoryname`</span> <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'种类名字'</span>, PRIMARY <span class="keyword">KEY</span> (<span class="string">`categoryid`</span>) ) <span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">CHARSET</span>=utf8 <span class="keyword">COLLATE</span>=utf8_general_ci; </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`school`</span>.<span class="string">`category`</span> (<span class="string">`categoryid`</span>, <span class="string">`pid`</span>, <span class="string">`categoryname`</span>) <span class="keyword">VALUES</span> (<span class="string">'2'</span>, <span class="string">'1'</span>, <span class="string">'信息技术'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">`school`</span>.<span class="string">`CATEGOrY`</span> (<span class="string">`categoryid`</span>, <span class="string">`pid`</span>, <span class="string">`categoryname`</span>) <span class="keyword">values</span> (<span class="string">'3'</span>, <span class="string">'1'</span>, <span class="string">'软件开发'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">`school`</span>.<span class="string">`category`</span> (<span class="string">`categoryid`</span>, <span class="string">`PId`</span>, <span class="string">`categoryname`</span>) <span class="keyword">values</span> (<span class="string">'5'</span>, <span class="string">'1'</span>, <span class="string">'美术设计'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">iNTO</span> <span class="string">`School`</span>.<span class="string">`category`</span> (<span class="string">`categoryid`</span>, <span class="string">`pid`</span>, <span class="string">`categorynamE`</span>) <span class="keyword">VAlUES</span> (<span class="string">'4'</span>, <span class="string">'3'</span>, <span class="string">'数据库'</span>); </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">`school`</span>.<span class="string">`category`</span> (<span class="string">`CATEgoryid`</span>, <span class="string">`pid`</span>, <span class="string">`categoryname`</span>) <span class="keyword">values</span> (<span class="string">'8'</span>, <span class="string">'2'</span>, <span class="string">'办公信息'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="string">`school`</span>.<span class="string">`category`</span> (<span class="string">`categoryid`</span>, <span class="string">`pid`</span>, <span class="string">`CAtegoryname`</span>) <span class="keyword">values</span> (<span class="string">'6'</span>, <span class="string">'3'</span>, <span class="string">'web开发'</span>); </span><br><span class="line"><span class="keyword">inserT</span> <span class="keyword">INTO</span> <span class="string">`SCHool`</span>.<span class="string">`category`</span> (<span class="string">`categoryid`</span>, <span class="string">`pid`</span>, <span class="string">`categoryname`</span>) <span class="keyword">valueS</span> (<span class="string">'7'</span>, <span class="string">'5'</span>, <span class="string">'ps技术'</span>);</span><br></pre></td></tr></table></div></figure>



<p>自己的表和自己的表连接，核心 ：<strong>一张表拆分为两张一样的表</strong></p>
<p>父类</p>
<div class="table-container"><table>
<thead>
<tr>
<th>categoryid</th>
<th>categoryname</th>
</tr>
</thead>
<tbody><tr>
<td>2</td>
<td>信息技术</td>
</tr>
<tr>
<td>3</td>
<td>软件开发</td>
</tr>
<tr>
<td>5</td>
<td>美术设计</td>
</tr>
</tbody></table></div>
<p>子类</p>
<div class="table-container"><table>
<thead>
<tr>
<th>pid</th>
<th>categoryid</th>
<th>categoryName</th>
</tr>
</thead>
<tbody><tr>
<td>3</td>
<td>4</td>
<td>数据库</td>
</tr>
<tr>
<td>2</td>
<td>8</td>
<td>办公信息</td>
</tr>
<tr>
<td>3</td>
<td>6</td>
<td>web开发</td>
</tr>
<tr>
<td>5</td>
<td>7</td>
<td>ps设计</td>
</tr>
</tbody></table></div>
<p>操作：查询父类对应的子类关系</p>
<div class="table-container"><table>
<thead>
<tr>
<th>父类</th>
<th>子类</th>
</tr>
</thead>
<tbody><tr>
<td>信息技术</td>
<td>办公信息</td>
</tr>
<tr>
<td>软件开发</td>
<td>数据库</td>
</tr>
<tr>
<td>软件开发</td>
<td>web开发</td>
</tr>
<tr>
<td>美术设计</td>
<td>ps技术</td>
</tr>
</tbody></table></div>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询父子信息</span></span><br><span class="line"><span class="keyword">SELECT</span> a.<span class="string">`categoryname`</span> <span class="keyword">AS</span> <span class="string">'父类'</span>, b.<span class="string">`categoryname`</span> <span class="keyword">AS</span> <span class="string">'子类'</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="string">`category`</span> <span class="keyword">AS</span> a , <span class="string">`category`</span> <span class="keyword">AS</span> b</span><br><span class="line"><span class="keyword">WHERE</span> a.<span class="string">`categoryid`</span> = b.<span class="string">`pid`</span>;</span><br></pre></td></tr></table></div></figure>




        <h3 id="4-10-分页"   >
          <a href="#4-10-分页" class="heading-link"><i class="fas fa-link"></i></a>4.10 分页</h3>
      <p><strong>limit 当前页 页面的大小</strong></p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 为什么要分页？</span></span><br><span class="line"><span class="comment">-- 缓解数据库压力，给人更好的体验  or 瀑布流</span></span><br><span class="line"><span class="comment">-- 分页每页只显示五条数据</span></span><br><span class="line"><span class="comment">-- 语法： limit 当前页 页面的大小</span></span><br><span class="line"><span class="keyword">SELECT</span> s.<span class="string">`studentno`</span>,<span class="string">`studentname`</span>,<span class="string">`subjectname`</span>,<span class="string">`studentresult`</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="string">`student`</span> s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="string">`result`</span> r</span><br><span class="line"><span class="keyword">ON</span> s.<span class="string">`studentno`</span> = r.<span class="string">`studentno`</span></span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="string">`subject`</span> sub</span><br><span class="line"><span class="keyword">ON</span> r.<span class="string">`subjectno`</span> = sub.<span class="string">`subjectno`</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`subjectname`</span> = <span class="string">'数据库结构-1'</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="string">`studentresult`</span> <span class="keyword">ASC</span></span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">0</span>,<span class="number">5</span></span><br><span class="line"><span class="comment">-- 规律</span></span><br><span class="line"><span class="comment">-- 第一页   limit 0,5  -----&gt; (1-1)* 5</span></span><br><span class="line"><span class="comment">-- 第二页   limit 5,5  -----&gt; (2-1)* 5</span></span><br><span class="line"><span class="comment">-- 第三页   limit 10,5 -----&gt; (3-1)* 5</span></span><br><span class="line"><span class="comment">-- 第N页    limit 0,5  -----&gt; (n-1)* pageSize   pageSize:页面大小 (n-1)* pageSize： 起始值</span></span><br><span class="line"><span class="comment">-- 总页数： 数据综述/页面大小</span></span><br></pre></td></tr></table></div></figure>




        <h3 id="4-11-子查询"   >
          <a href="#4-11-子查询" class="heading-link"><i class="fas fa-link"></i></a>4.11 子查询</h3>
      <p>where（这个值是计算出来的）</p>
<p>本质：在where 语句中嵌套一个子查询语句</p>
<p>where (select * from)</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- where </span></span><br><span class="line"><span class="comment">-- 查询数据库结构-1 的所有考试结果（学号、科目编号、成绩），降序排序</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,r.<span class="string">`subjectno`</span>,<span class="string">`studentresult`</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="string">`result`</span> r</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="string">`subject`</span> sub</span><br><span class="line"><span class="keyword">ON</span> r.<span class="string">`subjectno`</span> = sub.<span class="string">`studentno`</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`subjectname`</span> = <span class="string">'数据库结构-1'</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="string">`studentresult`</span> <span class="keyword">DESC</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二：使用自查询（）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`studentno`</span>,<span class="string">`subjectno`</span>,<span class="string">`studentresult`</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="string">`result`</span> </span><br><span class="line"><span class="keyword">WHERE</span> studentno = (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="string">`subjectno`</span> <span class="keyword">FROM</span> <span class="string">`subject`</span></span><br><span class="line">    <span class="keyword">WHERE</span> <span class="string">`subjectname`</span> = <span class="string">'数据库结构-1'</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="string">`studentresult`</span> <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 分数不小于80分的学生的学号和姓名</span></span><br><span class="line"><span class="keyword">SELECT</span> s. <span class="string">`studentno`</span>,<span class="string">`studentname`</span></span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="string">`result`</span> r</span><br><span class="line"><span class="keyword">ON</span> r.<span class="string">`studentno`</span> = s.<span class="string">`studentno`</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`studentresult`</span> &gt;= <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">-- 在这个基础上增加一个科目 高等数学-2</span></span><br><span class="line"><span class="keyword">SELECT</span>  <span class="keyword">DISTINCT</span> s. <span class="string">`studentno`</span>,<span class="string">`studentname`</span></span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="string">`result`</span> r</span><br><span class="line"><span class="keyword">ON</span> r.<span class="string">`studentno`</span> = s.<span class="string">`studentno`</span> </span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`studentresult`</span> &gt;= <span class="number">80</span> <span class="keyword">AND</span> <span class="string">`subjectno`</span> = (<span class="keyword">SELECT</span> <span class="string">`subjectno`</span> <span class="keyword">FROM</span> <span class="string">`subject`</span> <span class="keyword">WHERE</span> <span class="string">`subjectname`</span> = <span class="string">'高等数学-2'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询课程为 高等数学-2 且分数不小于80分的学生的学号和姓名</span></span><br><span class="line"><span class="keyword">SELECT</span> s.<span class="string">`studentno`</span>,<span class="string">`studentname`</span></span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="string">`result`</span> r</span><br><span class="line"><span class="keyword">ON</span> r.<span class="string">`studentno`</span> = s.<span class="string">`studentno`</span></span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="string">`subject`</span> sub</span><br><span class="line"><span class="keyword">ON</span> r.<span class="string">`subjectno`</span> = sub.<span class="string">`subjectno`</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`subjectname`</span> = <span class="string">'高等数学-2'</span> <span class="keyword">AND</span> <span class="string">`studentresult`</span> &gt;= <span class="number">80</span></span><br></pre></td></tr></table></div></figure>




        <h3 id="4-12分组和过滤"   >
          <a href="#4-12分组和过滤" class="heading-link"><i class="fas fa-link"></i></a>4.12分组和过滤</h3>
      <p><strong>where不能和group by一起用，group by 要和having一起用</strong></p>

        <h2 id="5-MySQL函数"   >
          <a href="#5-MySQL函数" class="heading-link"><i class="fas fa-link"></i></a>5.MySQL函数</h2>
      
        <h3 id="5-1常用函数"   >
          <a href="#5-1常用函数" class="heading-link"><i class="fas fa-link"></i></a>5.1常用函数</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 常用函数</span></span><br><span class="line"><span class="comment">-- 数学运算</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ABS</span>(<span class="number">-7</span>)   <span class="comment">-- 绝对值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CEILING</span> (<span class="number">9.4</span>)  <span class="comment">-- 向上取整</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">FLOOR</span> (<span class="number">9.4</span>)    <span class="comment">-- 向下取整</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">RAND</span> ()        <span class="comment">-- 返回一个0~1之间的随机数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SIGN</span> (<span class="number">-7</span>)       <span class="comment">-- 判断一个数的符号   0：0  正数：1  负数：-1</span></span><br><span class="line"><span class="comment">-- 字符串函数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CHAR_LENGTH</span> (<span class="string">'凡王之血，必以剑终'</span>)     <span class="comment">-- 字符串长度</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span> (<span class="string">'厦'</span>,<span class="string">'门'</span>,<span class="string">'大'</span>,<span class="string">'学'</span>)           <span class="comment">-- 拼接字符串</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSERT</span> (<span class="string">'我爱编程'</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="string">'超级爱'</span>)       <span class="comment">-- 查询，从某个位置开始替换某个长度</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LOWER</span> (<span class="string">'Cyy'</span>)                          <span class="comment">-- 小写字母</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">UPPER</span> (<span class="string">'cyy'</span>)                          <span class="comment">-- 大写字母</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSTR</span> (<span class="string">'cyy'</span> <span class="string">'y'</span>)                      <span class="comment">-- 返回 第一次出现的字符串索引</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">REPLACE</span> (<span class="string">'狂神说坚持就能成功'</span>, <span class="string">'坚持'</span>,<span class="string">'努力'</span>)    <span class="comment">-- 返回指定的字符串（源字符串，截取的位置，截取的长度）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUBSTR</span> (<span class="string">'狂神说坚持就能成功'</span>, <span class="number">4</span>,<span class="number">6</span>)               <span class="comment">-- 返回指定的字符串（源字符串，截取的位置，截取的长度）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">REVERSE</span> (<span class="string">'你是年少的欢喜'</span>)             <span class="comment">-- 反转</span></span><br><span class="line"><span class="comment">-- 查询姓 周的同学，名字 邹</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">REPLACE</span> (<span class="string">`studentname`</span>,<span class="string">'周'</span>,<span class="string">'邹'</span>) <span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">`studentname`</span> <span class="keyword">LIKE</span> <span class="string">'周%'</span></span><br><span class="line"><span class="comment">-- 时间和日期函数（记住）</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CURRENT_DATE</span>()   <span class="comment">-- 获取当前日期</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CURDATE</span>()        <span class="comment">-- 获取当前日期</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NOW</span>()            <span class="comment">-- 获取当前的时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LOCALTIME</span>()      <span class="comment">-- 本地时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span> ()       <span class="comment">-- 系统时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(<span class="keyword">NOW</span>())      <span class="comment">-- 年</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MONTH</span>(<span class="keyword">NOW</span>())     <span class="comment">-- 月</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DAY</span>(<span class="keyword">NOW</span>())       <span class="comment">-- 日</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">HOUR</span>(<span class="keyword">NOW</span>())      <span class="comment">-- 小时</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MINUTE</span>(<span class="keyword">NOW</span>())    <span class="comment">-- 分钟</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SECOND</span>(<span class="keyword">NOW</span>())    <span class="comment">-- 秒</span></span><br><span class="line"><span class="comment">-- 系统</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSTEM_USER</span> ()   <span class="comment">-- 系统用户</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>()           <span class="comment">-- 系统用户</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">VERSION</span>()        <span class="comment">-- 系统版本</span></span><br></pre></td></tr></table></div></figure>




        <h3 id="5-2聚合函数（常用）"   >
          <a href="#5-2聚合函数（常用）" class="heading-link"><i class="fas fa-link"></i></a>5.2聚合函数（常用）</h3>
      <div class="table-container"><table>
<thead>
<tr>
<th>函数名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>COUNT()</td>
<td>计数</td>
</tr>
<tr>
<td>SUM()</td>
<td>求和</td>
</tr>
<tr>
<td>AVG()</td>
<td>平均值</td>
</tr>
<tr>
<td>MAX()</td>
<td>最大值</td>
</tr>
<tr>
<td>MIN()</td>
<td>最小值</td>
</tr>
</tbody></table></div>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--聚合函数--</span></span><br><span class="line"><span class="comment">--统计表中的数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="string">`bornDate`</span>) <span class="keyword">FROM</span> student; <span class="comment">--会忽略所有null值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> student;<span class="comment">--不会忽略null值，本质计算行数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="number">1</span>) <span class="keyword">FROM</span> student;<span class="comment">--不会忽略null值，本质计算行数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(<span class="string">`ss`</span>) <span class="keyword">AS</span> 总和 <span class="keyword">FROM</span> re;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(<span class="string">`ss`</span>) <span class="keyword">AS</span> 平均分 <span class="keyword">FROM</span> re;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(<span class="string">`ss`</span>) <span class="keyword">AS</span> 最高分 <span class="keyword">FROM</span> re;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MIN</span>(<span class="string">`ss`</span>) <span class="keyword">AS</span> 最低分 <span class="keyword">FROM</span> re;</span><br></pre></td></tr></table></div></figure>




        <h3 id="5-3数据库级别的MD5加密（扩展）"   >
          <a href="#5-3数据库级别的MD5加密（扩展）" class="heading-link"><i class="fas fa-link"></i></a>5.3数据库级别的MD5加密（扩展）</h3>
      <p><strong>主要增强算法复杂度和不可逆性</strong></p>
<p>MD5不可逆，值是固定的</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="string">`表名`</span> <span class="keyword">SET</span> pwd=<span class="keyword">MD5</span>(pwd) <span class="comment">--加密</span></span><br></pre></td></tr></table></div></figure>




        <h2 id="6-事务"   >
          <a href="#6-事务" class="heading-link"><i class="fas fa-link"></i></a>6.事务</h2>
      
        <h3 id="6-1什么是事务"   >
          <a href="#6-1什么是事务" class="heading-link"><i class="fas fa-link"></i></a>6.1什么是事务</h3>
      <p>要么都成功，要么都失败</p>
<p>将一组sql放在一个批次中去执行</p>
<p>事务原则：ACID 原则：原子性，一致性，隔离性，持久性  （脏读，幻读）</p>
<p><span class="exturl"><a class="exturl__link"   href="https://blog.csdn.net/dengjili/article/details/82468576"  target="_blank" rel="noopener">参考链接</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<p><strong>原子性（Atomicity）</strong></p>
<p>要么都成功，要么都失败</p>
<p><strong>一致性（Consistency）</strong></p>
<p>事务前后数据完整性要保持一致</p>
<p><strong>隔离性（Isolation）</strong></p>
<p>事务的隔离性是多个用户并发访问数据库时，数据库为每一个用户开启的事务，不能被其他事务的操作数据所干扰，多个并发事务之间要相互隔离。</p>
<p><strong>持久性（Durability）</strong>–事务提交</p>
<p>事务一但提交不可逆，被持久化到数据中</p>
<p><strong>隔离导致的问题：</strong></p>
<p><strong>脏读：</strong></p>
<p>指一个事务读取了另外一个事务未提交的数据。</p>
<p><strong>不可重复读：</strong></p>
<p>在一个事务内读取表中的某一行数据，多次读取结果不同。（这个不一定是错误，只是某些场合不对）</p>
<p><strong>虚读(幻读)</strong></p>
<p>是指在一个事务内读取到了别的事务插入的数据，导致前后读取数量总量不一致。</p>

        <h3 id="6-2执行事务"   >
          <a href="#6-2执行事务" class="heading-link"><i class="fas fa-link"></i></a>6.2执行事务</h3>
      <img src="/2021/04/25/MySQL%E5%AD%A6%E4%B9%A0/2.png" class="" title="图片">

<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 事务</span></span><br><span class="line"><span class="comment">-- mysql 是默认开启事务的</span></span><br><span class="line"><span class="keyword">SET</span> autocommint = <span class="number">0</span> <span class="comment">-- 关闭事务</span></span><br><span class="line"><span class="keyword">SET</span> autocommint = <span class="number">1</span> <span class="comment">-- 开启事务（默认的）</span></span><br><span class="line"><span class="comment">-- 手动处理事务</span></span><br><span class="line"><span class="comment">-- 启动事务</span></span><br><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span> <span class="comment">-- 标记一个事务的开始，从这个之后的 sql 都在同一个事务内</span></span><br><span class="line"><span class="keyword">INSERT</span> xx</span><br><span class="line"><span class="keyword">INSERT</span> xx</span><br><span class="line"><span class="comment">-- 提交：持久化 （成功）</span></span><br><span class="line"><span class="keyword">COMMIT</span></span><br><span class="line"><span class="comment">-- 回滚： 回到原来的样子（失败）</span></span><br><span class="line"><span class="keyword">ROLLBACK</span></span><br><span class="line"><span class="comment">-- 事务结束</span></span><br><span class="line"><span class="keyword">SET</span> autocommot = <span class="number">1</span>  <span class="comment">-- 开启事务 自动提交</span></span><br><span class="line"><span class="comment">-- 了解</span></span><br><span class="line"><span class="keyword">SAVEPOINT</span> 保存点名 <span class="comment">-- 设置一个事务的保存点</span></span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> <span class="keyword">SAVEPOINT</span> 保存点名 <span class="comment">-- 回滚到保存点</span></span><br><span class="line"><span class="keyword">RELEASE</span> <span class="keyword">SAVEPOINT</span> 保存点名  <span class="comment">-- 撤销保存点</span></span><br></pre></td></tr></table></div></figure>




        <h4 id="模拟场景"   >
          <a href="#模拟场景" class="heading-link"><i class="fas fa-link"></i></a>模拟场景</h4>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 转账实例</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> shop <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci</span><br><span class="line"><span class="keyword">USE</span> shop</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`account`</span>(</span><br><span class="line"> <span class="string">`id`</span> <span class="built_in">INT</span>(<span class="number">3</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>  AUTO_INCREMENT,</span><br><span class="line"> <span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line"> <span class="string">`money`</span> <span class="built_in">DECIMAL</span>(<span class="number">9</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line"> PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">)<span class="keyword">ENGINE</span> = <span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> = utf8</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`account`</span>( <span class="string">`name`</span>,<span class="string">`money`</span>)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'a'</span>,<span class="number">2000.00</span>),(<span class="string">'b'</span>,<span class="number">10000.00</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 模拟转账：事务</span></span><br><span class="line"><span class="keyword">SET</span> autocommit = <span class="number">0</span>    <span class="comment">-- 关闭自动提交</span></span><br><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span> <span class="comment">-- 开启一个事务</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="string">`account`</span> <span class="keyword">SET</span> money = money<span class="number">-500</span> <span class="keyword">WHERE</span> <span class="string">`name`</span> = <span class="string">'a'</span>  <span class="comment">-- a减500</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="string">`account`</span> <span class="keyword">SET</span> money = money+<span class="number">500</span> <span class="keyword">WHERE</span> <span class="string">`name`</span> = <span class="string">'a'</span>  <span class="comment">-- a加500</span></span><br><span class="line"><span class="keyword">COMMIT</span>; <span class="comment">-- 提交事务</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>; <span class="comment">-- 回滚</span></span><br><span class="line"><span class="keyword">SET</span> autocommit = <span class="number">1</span> <span class="comment">-- 恢复默认值</span></span><br></pre></td></tr></table></div></figure>




        <h2 id="7-索引"   >
          <a href="#7-索引" class="heading-link"><i class="fas fa-link"></i></a>7.索引</h2>
      <p>MySQL 官方对索引的定义为：<strong>索引（Index） 是帮助MySQL高效获取数据的数据结构。</strong></p>
<p>提取句子主干，就可以得到索引的本质：索引是数据结构</p>

        <h3 id="7-1-索引的分类"   >
          <a href="#7-1-索引的分类" class="heading-link"><i class="fas fa-link"></i></a>7.1 索引的分类</h3>
      <ul>
<li>主键索引：PRIMARY KEY<ul>
<li><strong>唯一标识 不可重复</strong>，只能有一个列作为主键</li>
</ul>
</li>
<li>唯一索引： UNIQUE KEY<ul>
<li>避免重复的列出现，<strong>唯一索引可以重复</strong>，多个列都可以标识为唯一索引</li>
</ul>
</li>
<li>常规索引： KEY/INDEX<ul>
<li>默认的，index/key 关键字来设置</li>
</ul>
</li>
<li>全文索引： FullText<ul>
<li>特定的数据库引擎下使用</li>
<li>快速定位数据</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 索引的使用</span></span><br><span class="line"><span class="comment">-- 1、 在创建表的时候给字段怎加索引</span></span><br><span class="line"><span class="comment">-- 2、 创建完毕后，增加索引</span></span><br><span class="line"><span class="comment">-- 显示所有的索引信息</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">INDEX</span> <span class="keyword">FROM</span>  <span class="string">`student`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 增加一个全文索引（索引名） 列名</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> school.<span class="string">`student`</span> <span class="keyword">ADD</span> FULLTEXT <span class="keyword">INDEX</span> <span class="string">`studentname`</span>(<span class="string">`studentname`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- explain 分析sql的执行情况</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="string">`student`</span>  <span class="comment">-- 非全文索引</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> *<span class="keyword">FROM</span> <span class="string">`student`</span> <span class="keyword">WHERE</span> <span class="keyword">MATCH</span>(<span class="string">`studentname`</span>) AGAINST (<span class="string">'张'</span>)</span><br></pre></td></tr></table></div></figure>

<p><span class="exturl"><a class="exturl__link"   href="https://blog.csdn.net/jiadajing267/article/details/81269067"  target="_blank" rel="noopener">参考资料</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="7-2-测试索引"   >
          <a href="#7-2-测试索引" class="heading-link"><i class="fas fa-link"></i></a>7.2 测试索引</h3>
      <figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`app_user`</span> (</span><br><span class="line"><span class="string">`id`</span> <span class="built_in">BIGINT</span>(<span class="number">20</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line"><span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line"><span class="string">`eamil`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line"><span class="string">`phone`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line"><span class="string">`gender`</span> <span class="built_in">TINYINT</span>(<span class="number">4</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line"><span class="string">`password`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line"><span class="string">`age`</span> <span class="built_in">TINYINT</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line"><span class="string">`create_time`</span> DATETIME <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line"><span class="string">`update_time`</span> <span class="built_in">TIMESTAMP</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line">PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line"><span class="comment">-- 插入100万数据.</span></span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> log_bin_trust_function_creators=<span class="number">1</span>; <span class="comment">-- 开启创建函数功能</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  第一个语句 delimiter 将 mysql 解释器命令行的结束符由”;” 改成了”$$”，</span></span><br><span class="line"><span class="comment">  让存储过程内的命令遇到”;” 不执行</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> mock_data()</span><br><span class="line"><span class="keyword">RETURNS</span> <span class="built_in">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DECLARE</span> <span class="keyword">num</span> <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1000000</span>;</span><br><span class="line">    <span class="keyword">DECLARE</span> i <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">    WHILE i&lt;num DO</span><br><span class="line">        <span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`app_user`</span>(<span class="string">`name`</span>,<span class="string">`eamil`</span>,<span class="string">`phone`</span>,<span class="string">`gender`</span>)<span class="keyword">VALUES</span>(<span class="keyword">CONCAT</span>(<span class="string">'用户'</span>,i),<span class="string">'19224305@qq.com'</span>,<span class="string">'123456789'</span>,<span class="keyword">FLOOR</span>(<span class="keyword">RAND</span>()*<span class="number">2</span>));</span><br><span class="line">        <span class="keyword">SET</span> i=i+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">WHILE</span>;</span><br><span class="line">    RETURN i;</span><br><span class="line"><span class="keyword">END</span>;$$</span><br><span class="line"><span class="keyword">SELECT</span> mock_data()$$ <span class="comment">-- 执行此函数 生成一百万条数据</span></span><br><span class="line"><span class="keyword">SELECT</span> *<span class="keyword">FROM</span> <span class="string">`app_user`</span> <span class="keyword">WHERE</span> <span class="string">`name`</span> = <span class="string">'用户9999'</span>   <span class="comment">-- 查一个试一下    --  0.388 sec</span></span><br><span class="line"><span class="comment">-- 创一个索引</span></span><br><span class="line"><span class="comment">-- id_表名_字段名</span></span><br><span class="line"><span class="comment">-- create index 索引名 on 表（字段）</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> id_app_user_name <span class="keyword">ON</span> <span class="string">`app_user`</span>(<span class="string">`name`</span>);</span><br><span class="line"><span class="keyword">SELECT</span> *<span class="keyword">FROM</span> <span class="string">`app_user`</span> <span class="keyword">WHERE</span> <span class="string">`name`</span> = <span class="string">'用户9999'</span>   <span class="comment">-- 创建索引后查询只需要 0.001 sec！</span></span><br></pre></td></tr></table></div></figure>

<p><strong>索引在小数据量的时候，用处不大，但是在大数据的时候，区别十分明显!</strong></p>

        <h3 id="7-3索引原则"   >
          <a href="#7-3索引原则" class="heading-link"><i class="fas fa-link"></i></a>7.3索引原则</h3>
      <ul>
<li>索引不是越多越好</li>
<li>不要对经常变动的数据加索引</li>
<li>小数据量的表不需要加索引</li>
<li>索引一般加在常用来查询的字段上</li>
</ul>
<p>索引的数据结构</p>
<p>Hash类型的索引</p>
<p>Btree: InnoDB 的默认数据结构</p>
<p><span class="exturl"><a class="exturl__link"   href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html"  target="_blank" rel="noopener">底层原理文献</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h2 id="8-数据库备份"   >
          <a href="#8-数据库备份" class="heading-link"><i class="fas fa-link"></i></a>8.数据库备份</h2>
      
        <h3 id="8-1用户管理"   >
          <a href="#8-1用户管理" class="heading-link"><i class="fas fa-link"></i></a>8.1用户管理</h3>
      <p><strong>SQL 命令操作</strong></p>
<p>用户表：mysql.user</p>
<p>本质：读这张表进行增删改查</p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 权限管理</span></span><br><span class="line"><span class="comment">-- 创建用户</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> chengyuyang <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'123456'</span>;</span><br><span class="line"><span class="comment">-- 修改密码 (修改当前密码)</span></span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> = <span class="keyword">PASSWORD</span>(<span class="string">'123456'</span>);</span><br><span class="line"><span class="comment">-- 修改密码（指定用户）</span></span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> <span class="keyword">FOR</span> chengyuyang = <span class="keyword">PASSWORD</span>(<span class="string">'123456'</span>);</span><br><span class="line"><span class="comment">-- 重命名</span></span><br><span class="line"><span class="keyword">RENAME</span> <span class="keyword">USER</span> chengyuyang <span class="keyword">TO</span> cyy</span><br><span class="line"><span class="comment">-- 用户授权 all privileges 全部权限 ：库表</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span>  *.* <span class="keyword">TO</span> chengyuyang   <span class="comment">-- all privileges  除了给别人权限，其他都能够干</span></span><br><span class="line"><span class="comment">-- 查看权限</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GRANTS</span> <span class="keyword">FOR</span> chengyuyang <span class="comment">-- 查看指定用户的权限</span></span><br><span class="line"><span class="comment">-- root 用户的权限</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span>  *.* <span class="keyword">TO</span> <span class="string">'root'</span>@<span class="string">'locakhost'</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span></span><br><span class="line"><span class="comment">-- 撤销权限   revoke 哪些权限  在哪个库撤销，给谁撤销</span></span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span>  *.* <span class="keyword">FROM</span> chengyuyang</span><br><span class="line"><span class="comment">-- 删除用户</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> chengyuyang</span><br></pre></td></tr></table></div></figure>




        <h3 id="8-2-MySQL备份"   >
          <a href="#8-2-MySQL备份" class="heading-link"><i class="fas fa-link"></i></a>8.2 MySQL备份</h3>
      <p>为什么要备份：</p>
<ul>
<li>保证重要的数据不丢失</li>
<li>数据转移</li>
</ul>
<p>MySQL数据库备份的方式</p>
<ul>
<li><p>直接拷贝物理文件（data文件夹）</p>
</li>
<li><p>在sqlyog这种可视化工具上操作</p>
<ul>
<li>在想要导出的表或者库中 选择备份或者导出</li>
</ul>
</li>
<li><p>使用命名行（bash） <strong>mysqldump</strong></p>
<ul>
<li><pre><code># mysqldump -h主机 -u用户名 -p密码 数据库 表名1 表名2 表名3 &gt; 物理磁盘位置/文件名
mysqldump -hlocalhost -uroot -p123456 school student &gt;D:/1.sql
#导入
# 登录的情况下，切换到指定的数据库
# source 备份文件
source d:/1.sql
mysql -u用户名 -p密码 库名&lt; 备份文件
<figure class="highlight plain"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">假设要备份数据库，防止数据丢失。</span><br><span class="line"></span><br><span class="line">把数据库给其它人 sql文件给别人即可</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 9.规范数据库设计</span><br><span class="line"></span><br><span class="line">### 9.1为什么需要设计</span><br><span class="line"></span><br><span class="line">&lt;font color&#x3D;&#39;red&#39;&gt;当数据库比较复杂的时候就需要设计了&lt;&#x2F;font&gt;</span><br><span class="line"></span><br><span class="line">糟糕的数据库设计：</span><br><span class="line"></span><br><span class="line">- 数据冗余，浪费空间</span><br><span class="line">- 数据库的插入和删除都会麻烦、异常[屏蔽使用物理外键]</span><br><span class="line">- 程序的性能差</span><br><span class="line"></span><br><span class="line">良好的数据库：</span><br><span class="line"></span><br><span class="line">- 节省内存空间</span><br><span class="line">- 保证数据库的完整性</span><br><span class="line">- 方便我们开发系统</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">软件开发中关于数据库的设计：</span><br><span class="line"></span><br><span class="line">- 分析需求：分析业务和需要处理的数据库的需求</span><br><span class="line">- 概要设计：设计关系图E-R图</span><br><span class="line"></span><br><span class="line">#### 举个例子：**设计数据库的步骤：个人博客**</span><br><span class="line"></span><br><span class="line">- 收集信息，分析需求</span><br><span class="line">  - 用户表（用户登录注销，用户的个人信息，写博客，创建分类）</span><br><span class="line">  - 文章分类表（文章分类，谁创建的）</span><br><span class="line">  - 文章表（文章的信息）</span><br><span class="line">  - 友链表（友链信息）</span><br><span class="line">  - 自定义表（系统信息，某个关键字，或者一些主字段）</span><br><span class="line">  - 说说表 (发表心情)</span><br><span class="line">- 标识实体（把需求落地到每个字段）</span><br><span class="line">- 标识实体之间的关系</span><br><span class="line">  - 写博客：user —&gt; blog</span><br><span class="line">  - 创建分类：user —&gt; category</span><br><span class="line">  - 关注：user —&gt; user</span><br><span class="line">  - 友链： links</span><br><span class="line">  - 评论： user-user—&gt;blog</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 10.数据库的规约，三大范式</span><br><span class="line"></span><br><span class="line">#### 为什么需要数据规范化</span><br><span class="line"></span><br><span class="line">- 信息重复</span><br><span class="line">- 更新异常</span><br><span class="line">- 插入异常</span><br><span class="line">  - 无法正常显示信息</span><br><span class="line">- 删除异常</span><br><span class="line">  - 丢失有效的信息</span><br><span class="line"></span><br><span class="line">&gt; 三大范式</span><br><span class="line"></span><br><span class="line">**第一范式（1NF）：要求数据库表的每一列都是不可分割的原子数据项**</span><br><span class="line"></span><br><span class="line">原子性：保存每一列不可再分</span><br><span class="line"></span><br><span class="line">**第二范式（2NF）**：**确保数据库表中的每一列都和主键相关，而不能只与主键的某一部分相关（主要针对联合主键而言）**</span><br><span class="line"></span><br><span class="line">前提:满足第一范式</span><br><span class="line"></span><br><span class="line">每张表只描述一件事情</span><br><span class="line"></span><br><span class="line">**第三范式（3NF）**：**确保数据表中的每一列数据都和主键直接相关，而不能间接相关**</span><br><span class="line"></span><br><span class="line">前提：满足第一范式和第二范式</span><br><span class="line"></span><br><span class="line">第三范式需要确保数据表中的每一列数据都和主键直接相关联，而不能间接相关联</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 规范性和性能问题</span><br><span class="line"></span><br><span class="line">阿里：关联查询的表不得超过三张表</span><br><span class="line"></span><br><span class="line">- 考虑商业化的需求和目标，（成本，用户体验！）数据库的性能更加重要</span><br><span class="line">- 在规范性能的问题的时候，需要适当的考虑一下规范性！</span><br><span class="line">- 故意给某些表怎加一些冗余的字段（从多表查询中变为单表查询）</span><br><span class="line">- 故意增加一些计算列（从大数据量降低为小数据量的查询：索引）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 11. JDBC(重点)</span><br><span class="line"></span><br><span class="line">### 11.1 数据库驱动</span><br><span class="line"></span><br><span class="line">驱动: 声卡、显卡、数据库</span><br><span class="line"></span><br><span class="line">&#123;% asset_img 3.png 图片 %&#125;</span><br><span class="line"></span><br><span class="line">我们的程序会通过 数据库驱动 和数据库打交道</span><br><span class="line"></span><br><span class="line">### 11.2 JDBC</span><br><span class="line"></span><br><span class="line">SUN公司为了简化开发人员的（对数据库的统一）操作，提高了一个（java操作数据库的）规范，俗称 JDBC</span><br><span class="line"></span><br><span class="line">这些规范的具体实现由具体的厂商去做</span><br><span class="line"></span><br><span class="line">对于开发人员来说，只需要掌握JDBC接口的操作即可</span><br><span class="line"></span><br><span class="line">&#123;% asset_img 4.png 图片 %&#125;</span><br><span class="line"></span><br><span class="line">java.sql</span><br><span class="line"></span><br><span class="line">java.xsql</span><br><span class="line"></span><br><span class="line">还需要导入一个数据库驱动 MySQL Connector</span><br><span class="line"></span><br><span class="line">### </span><br><span class="line"></span><br><span class="line">### 11. 3 第一个JDBC程序</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;java</span><br><span class="line">package com.kk;</span><br><span class="line"></span><br><span class="line">import java.sql.*;</span><br><span class="line"></span><br><span class="line">public class jdbc &#123;</span><br><span class="line">    public static void main(String[] args) throws ClassNotFoundException, SQLException &#123;</span><br><span class="line">        &#x2F;&#x2F;1.加载驱动</span><br><span class="line">        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);&#x2F;&#x2F;固定写法</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;2.用户信息和url(支持中文编码，字符集utf8，使用安全连接)</span><br><span class="line">        &#x2F;&#x2F;useUnicode&#x3D;true&amp;charcterEncoding&#x3D;utf8&amp;useSSL&#x3D;true&quot;</span><br><span class="line">        String url&#x3D;&quot;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;jdbcstudy?useUnicode&#x3D;true&amp;charcterEncoding&#x3D;utf8&amp;useSSL&#x3D;false&quot;;</span><br><span class="line">        String usename&#x3D;&quot;root&quot;;</span><br><span class="line">        String password&#x3D;&quot;123456&quot;;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;3.连接成功，数据库对象</span><br><span class="line">        Connection connection &#x3D; DriverManager.getConnection(url, usename, password);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;4.执行sql的对象</span><br><span class="line">        Statement statement &#x3D; connection.createStatement();</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;5.执行sql对象去执行sql</span><br><span class="line">        String sql&#x3D;&quot;select * from users&quot;;</span><br><span class="line">        ResultSet resultSet &#x3D; statement.executeQuery(sql);&#x2F;&#x2F;返回结果集,封装了我们全部查出来的结果</span><br><span class="line"></span><br><span class="line">        while(resultSet.next())&#123;</span><br><span class="line">            System.out.println(&quot;id&#x3D;&quot;+resultSet.getObject(&quot;id&quot;));</span><br><span class="line">            System.out.println(&quot;name&#x3D;&quot;+resultSet.getObject(&quot;NAME&quot;));</span><br><span class="line">            System.out.println(&quot;pwd&#x3D;&quot;+resultSet.getObject(&quot;PASSWORD&quot;));</span><br><span class="line">            System.out.println(&quot;email&#x3D;&quot;+resultSet.getObject(&quot;email&quot;));</span><br><span class="line">            System.out.println(&quot;birth&#x3D;&quot;+resultSet.getObject(&quot;birthday&quot;));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;6.释放连接</span><br><span class="line">        resultSet.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>


</code></pre></li>
</ul>
</li>
</ul>
<p>步骤总结：</p>
<ol>
<li><p>加载驱动</p>
</li>
<li><p>连接数据库DriverManager</p>
</li>
<li><p>获得执行sql的对象 Statement</p>
</li>
<li><p>获得返回的结果集</p>
</li>
<li><p>释放连接</p>
</li>
</ol>
<p>DriverManager</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DriverManager.registerDriver(new com.mysql.jdbc.Driver());</span></span><br><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);   <span class="comment">// 固定写方，加载驱动</span></span><br><span class="line"></span><br><span class="line">Connection conn = DriverManager.getConnection(url,username,password);</span><br><span class="line"><span class="comment">// conn 代表数据库</span></span><br><span class="line"><span class="comment">// 数据库设置自动提交</span></span><br><span class="line"><span class="comment">// 事务提交</span></span><br><span class="line"><span class="comment">// 事务回滚</span></span><br><span class="line">conn.rollback();</span><br><span class="line">conn.commit();</span><br><span class="line">conn.setAutoCommit();</span><br></pre></td></tr></table></div></figure>



<p>URL</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String url=<span class="string">"jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//MySQL  端口号：3306</span></span><br><span class="line"><span class="comment">//jdbc:mysql://主机地址:端口号/数据库名?参数1&amp;参数2&amp;参数3</span></span><br><span class="line"><span class="comment">//oralce 端口号：1521</span></span><br><span class="line"><span class="comment">// jdbc:oracle:thin:@主机地址：1521:sid</span></span><br></pre></td></tr></table></div></figure>



<p>Statement 执行sql的对象</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String sql = <span class="string">"SELECT *FROM users"</span>; <span class="comment">//编写SQL</span></span><br><span class="line">Statement stmt = conn.createStatement();<span class="comment">// 执行SQL对象Statement 执行SQL的对象</span></span><br><span class="line">stmt.executeQuery(); <span class="comment">//查询操作返回 ResultSet</span></span><br><span class="line">stmt.execute();      <span class="comment">// 执行任何SQL</span></span><br><span class="line">stmt.executeUpdate(); <span class="comment">// 更新、插入、删除   返回一个受影响的行数</span></span><br></pre></td></tr></table></div></figure>



<p>ResultSet 查询的结果集 ：封装了所有的查询结果</p>
<p>获得指定的数据类型</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rs.getObject();  <span class="comment">// 在不知道列类型的情况下使用</span></span><br><span class="line"><span class="comment">// 如果知道列的类型就使用指定的类型</span></span><br><span class="line">rs.getString();</span><br><span class="line">rs.getInt();</span><br><span class="line">rs.getFloat();</span><br><span class="line">rs.getDate();</span><br><span class="line">......</span><br></pre></td></tr></table></div></figure>



<p>遍历、指针</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rs.beforeFirst();      <span class="comment">// 移动到最前面</span></span><br><span class="line">rs.afterLast();       <span class="comment">// 移动到最后面</span></span><br><span class="line">rs.next();           <span class="comment">// 移动到下一个数据</span></span><br><span class="line">rs.previous();      <span class="comment">// 移动到前一行</span></span><br><span class="line">rs.absolute(row);  <span class="comment">// 移动到指定行</span></span><br></pre></td></tr></table></div></figure>



<p>释放资源</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rs.close();</span><br><span class="line">stmt.close();</span><br><span class="line">conn.close();</span><br></pre></td></tr></table></div></figure>




        <h3 id="11-4-statement-对象"   >
          <a href="#11-4-statement-对象" class="heading-link"><i class="fas fa-link"></i></a>11.4 statement 对象</h3>
      <p><strong>jdbc中的statement对象用于向数据库发送SQL语句</strong>，想完成对数据库的增删改查，只需要通过这个对象向数据库发送增删改查语句即可。</p>
<p>Statement对象的executeUpdate 方法 ，用于向数据库发送 增、删、改的SQL语句，executeUpdate执行完后，将会返回一个整数（即增删改语句导致了数据库几行数据发生了变化）</p>
<p><strong>RUD操作 – create</strong></p>
<p>使用executeUpdate（String sql）方法完成数据添加操作，示例操作：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Statement st = conn.createStatement();</span><br><span class="line">String sql = <span class="string">"insert into user(...) values(....)"</span>;</span><br><span class="line"><span class="keyword">int</span> num = st.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">    System.out.println(<span class="string">"插入成功！"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



<p><strong>CRUD操作 – delete</strong></p>
<p>使用executeUpdate(String sql)方法完成数据删除操作</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Statement st = conn.createStatement();</span><br><span class="line">String sql = <span class="string">"delete from user where id = 1"</span>;</span><br><span class="line"><span class="keyword">int</span> num = st.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">    System.out.println(<span class="string">"删除成功！"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



<p><strong>CRUD操作 – update</strong></p>
<p>使用executeUpdate(String sql)方法完成数据修改操作</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Statement st = conn.createStatement();</span><br><span class="line">String sql = <span class="string">"update user set name = '' where name = '' "</span>;</span><br><span class="line"><span class="keyword">int</span> num = st.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">    System.out.println(<span class="string">"修改成功！"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



<p><strong>CRUD操作 – read</strong></p>
<p>使用executeQuery(String sql)方法完成数据库查询操作</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Statement st = conn.createStatement();</span><br><span class="line">String sql = <span class="string">" select * from user where id = 1 "</span>;</span><br><span class="line"><span class="keyword">int</span> num = st.executeUpdate(sql);</span><br><span class="line"><span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">    <span class="comment">//根据获取列表的数据类型，分别调用rs的相应方法映射到JAVA对象中</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h4 id="编写工具类"   >
          <a href="#编写工具类" class="heading-link"><i class="fas fa-link"></i></a>编写工具类</h4>
      <p>1、创建资源文件 db,properties</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">url=jdbc:mysql:<span class="comment">//localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false</span></span><br><span class="line">username = root</span><br><span class="line">password = <span class="number">123456</span></span><br><span class="line">driver = com.mysql.jdbc.Driver</span><br></pre></td></tr></table></div></figure>



<p>2、新建工具类，写有连接数据库使用的代码，方便其他类调用 jdbcUtils.java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">jdbcUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String username = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            InputStream in = jdbcUtils.class.getResourceAsStream("/db.properties");</span><br><span class="line">            Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">            properties.load(in);</span><br><span class="line">            driver = properties.getProperty(<span class="string">"driver"</span>);</span><br><span class="line">            url = properties.getProperty(<span class="string">"url"</span>);</span><br><span class="line">            username = properties.getProperty(<span class="string">"username"</span>);</span><br><span class="line">            password = properties.getProperty(<span class="string">"password"</span>);</span><br><span class="line">            <span class="comment">//驱动只需要加载一次</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url,username,password);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//释放连接资源</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection conn, Statement st, ResultSet rs)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(st!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                st.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(conn!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



<p>3 、进行插入测试 TestInsert.java</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestInsert</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = jdbcUtils.getConnection(); <span class="comment">//获取连接</span></span><br><span class="line">            st = conn.createStatement();  <span class="comment">//创建Statement对象</span></span><br><span class="line">            String sql = <span class="string">"INSERT INTO users (id,`NAME`,`PASSWORD`,`email`,`birthday`)\n"</span> +</span><br><span class="line">                    <span class="string">"VALUES(4,'chengyuyang','123456','3247829@qq.com','2021-1-1')\n"</span>;</span><br><span class="line">            <span class="keyword">int</span> i =  st.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123; <span class="comment">//如果数据大于0</span></span><br><span class="line">                System.out.println(<span class="string">"插入成功！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            jdbcUtils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>增删改都是用st.executeUpdate</p>

        <h3 id="11-5-SQL注入问题"   >
          <a href="#11-5-SQL注入问题" class="heading-link"><i class="fas fa-link"></i></a>11.5 SQL注入问题</h3>
      <p>SQL存在漏洞，会被攻击导致数据泄露。<strong>SQL会被拼接 or</strong></p>
<p>下方代码可以查询全部数据库内容：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SQL</span>注入 </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 正常登录 login("chengyuyang","123456");</span></span><br><span class="line">        login(<span class="string">" 'or' 1=1"</span>,<span class="string">" 'or' 1=1"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">(String username,String password)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = jdbcUtils.getConnection();</span><br><span class="line">            st = conn.createStatement();</span><br><span class="line">            String sql = <span class="string">"select * from users where `NAME` = '"</span> + username +<span class="string">"' AND  `password` = '"</span>+ password + <span class="string">"' "</span>;</span><br><span class="line">            rs = st.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                System.out.println(rs.getString(<span class="string">"NAME"</span>));</span><br><span class="line">                System.out.println(rs.getString(<span class="string">"password"</span>));</span><br><span class="line">                System.out.println(<span class="string">"============="</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h3 id="11-6-PreparedStatement-对象"   >
          <a href="#11-6-PreparedStatement-对象" class="heading-link"><i class="fas fa-link"></i></a>11.6 PreparedStatement 对象</h3>
      <p>使用preparedStatement对象，<strong>可以有效的防止SQL注入，并且效率更高</strong></p>
<p> PreparedStatement 防止SQL注入的本质，<strong>把传递进来的参数当作字符串</strong><br>假设其中存在转义字符，就直接忽略， 比如说 <strong>‘ 会被直接转义</strong></p>
<figure class="highlight sql"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.PreparedStatement;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.util.Date;</span><br><span class="line">public class TestInsert2 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Connection conn = null;</span><br><span class="line">        PreparedStatement st = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            conn = jdbcUtils.getConnection();</span><br><span class="line">            String sql = "<span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">users</span>(<span class="keyword">id</span>,<span class="string">`NAME`</span>,<span class="string">`password`</span>,<span class="string">`email`</span>,<span class="string">`birthday`</span>) <span class="keyword">values</span>(?,?,?,?,?)<span class="string">";</span></span><br><span class="line"><span class="string">            st = conn.prepareStatement(sql);</span></span><br><span class="line"><span class="string">            //手动赋值参数</span></span><br><span class="line"><span class="string">            st.setInt(1,5);</span></span><br><span class="line"><span class="string">            st.setString(2,"</span>chengyuyang<span class="string">");</span></span><br><span class="line"><span class="string">            st.setString(3,"</span><span class="number">123456</span><span class="string">");</span></span><br><span class="line"><span class="string">            st.setString(4,"</span><span class="number">1531857645</span>@qq.com<span class="string">");</span></span><br><span class="line"><span class="string">            //                                 获得时间戳   new Date().getTime()</span></span><br><span class="line"><span class="string">            st.setDate(5,new java.sql.Date(new Date().getTime()));</span></span><br><span class="line"><span class="string">            //执行</span></span><br><span class="line"><span class="string">            int i = st.executeUpdate();</span></span><br><span class="line"><span class="string">            if(i&gt;0)&#123;</span></span><br><span class="line"><span class="string">                System.out.println("</span>插入成功<span class="string">");</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125; catch (SQLException e) &#123;</span></span><br><span class="line"><span class="string">            e.printStackTrace();</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></div></figure>



<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SQL</span>注入2 </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//login("chengyuyang","123456");//正常登录</span></span><br><span class="line">        login(<span class="string">" '' or 1=1"</span>,<span class="string">" '' or 1=1"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">(String username,String password)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = jdbcUtils.getConnection();</span><br><span class="line">            <span class="comment">// PreparedStatement 防止SQL注入的本质，把传递进来的参数当作字符串</span></span><br><span class="line">            <span class="comment">// 假设其中存在转义字符，就直接忽略， 比如说 ' 会被直接转义</span></span><br><span class="line">            String sql = <span class="string">"select * from users where `NAME` = ? and `password`=?"</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            st.setString(<span class="number">1</span>, username);</span><br><span class="line">            st.setString(<span class="number">2</span>,password);</span><br><span class="line">            rs = st.executeQuery();  <span class="comment">// 查询完毕会返回一个结果集</span></span><br><span class="line">          <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                System.out.println(rs.getString(<span class="string">"NAME"</span>));</span><br><span class="line">                System.out.println(rs.getString(<span class="string">"password"</span>));</span><br><span class="line">                System.out.println(<span class="string">"============="</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h3 id="11-7-在IDEA上链接数据库"   >
          <a href="#11-7-在IDEA上链接数据库" class="heading-link"><i class="fas fa-link"></i></a>11.7 在IDEA上链接数据库</h3>
      <p>点击右边的database</p>
<img src="/2021/04/25/MySQL%E5%AD%A6%E4%B9%A0/5.png" class="" title="图片">

<img src="/2021/04/25/MySQL%E5%AD%A6%E4%B9%A0/6.png" class="" title="图片">




        <h3 id="11-8事务"   >
          <a href="#11-8事务" class="heading-link"><i class="fas fa-link"></i></a>11.8事务</h3>
      <p>要么都成功要么都失败</p>

        <h4 id="ACID原则"   >
          <a href="#ACID原则" class="heading-link"><i class="fas fa-link"></i></a>ACID原则</h4>
      <ul>
<li><strong>原子性</strong>：要么全部完成，要么都不完成</li>
<li><strong>一致性</strong>：总数不变</li>
<li><strong>持久性</strong>：一旦提交不可逆，持久化到数据库了</li>
<li><strong>隔离性</strong>：多个进程互不干扰</li>
</ul>

        <h4 id="隔离性的问题"   >
          <a href="#隔离性的问题" class="heading-link"><i class="fas fa-link"></i></a>隔离性的问题</h4>
      <ul>
<li>脏读：一个事务读取另一个<strong>没有提交的事务</strong></li>
<li>不可重复读：在同一个事务内，<strong>重复读取表中的数据</strong>，表数据发生了变化</li>
<li>虚读(幻读)：在一个事务内，读取到了<strong>别人插入的数据</strong>，导致前后读取出来的<strong>结果不一致</strong></li>
</ul>

        <h4 id="代码实现"   >
          <a href="#代码实现" class="heading-link"><i class="fas fa-link"></i></a>代码实现</h4>
      <ul>
<li>第一步：开启事务（<strong>conn.setAutoCommit(false);</strong>）</li>
<li>第二步：一组业务执行完毕后，提交事务（<strong>conn.commit();</strong>）</li>
<li>第三步：可以在catch语句中显示的定义回滚语句，但默认失败也会回滚（<strong>conn.rollback();</strong>）</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestTransaction1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement ps = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = jdbcUtils.getConnection();</span><br><span class="line">            <span class="comment">//关闭数据库的自动提交，自动会开启事务</span></span><br><span class="line">            conn.setAutoCommit(<span class="keyword">false</span>);  <span class="comment">//开启事务</span></span><br><span class="line">            String sql1 = <span class="string">"update account set money = money - 100 where name = 'A'"</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql1);</span><br><span class="line">            ps.executeUpdate();</span><br><span class="line">            String sql2 = <span class="string">"update account set money = money + 100 where name = 'B'"</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql2);</span><br><span class="line">            ps.executeUpdate();</span><br><span class="line">            conn.commit();  <span class="comment">//业务完毕，提交事务</span></span><br><span class="line">            System.out.println(<span class="string">"成功！"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="comment">//如果失败则回滚事务</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.rollback(); <span class="comment">//就算没有此句，如果失败也是默认回滚</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            jdbcUtils.release(conn,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>




        <h3 id="11-9数据库连接池"   >
          <a href="#11-9数据库连接池" class="heading-link"><i class="fas fa-link"></i></a>11.9数据库连接池</h3>
      <p>数据库连接 —- 执行完毕 —- 释放</p>
<p>连接 — 释放 十分浪费系统资源</p>
<p>池化技术： 准备一些预先的资源，过来就连接预先准备好的</p>
<p>——— 开门—- 业务员： 等待 — 服务 —</p>
<p>常用连接数：10个</p>
<p>最小连接数：5个</p>
<p>最大连接数：15 业务最高承载上限</p>
<p>超过等待排队</p>
<p>等待超时：100ms</p>
<p>编写连接池 实现 DataSource 接口</p>
<blockquote>
<p>开源数据源实现</p>
</blockquote>
<p>DBCP</p>
<p>C3P0</p>
<p>Druid: 阿里巴巴</p>
<p>使用了这些数据库连接池之后，我们在项目开发中就不需要编写连接数据库的代码</p>
<blockquote>
<p>DBCP</p>
</blockquote>
<p>需要的jar包<br>commons-dbcp-1.4<br>commons-pool-1.6</p>
<p>写 jdbcUtils_dbcp 工具类</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp.BasicDataSourceFactory;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">jdbcUtils_dbcp</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource dataSource = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            InputStream in = jdbcUtils.class.getResourceAsStream("/dbcpconfig.properties");</span><br><span class="line">            Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">            properties.load(in);</span><br><span class="line">            <span class="comment">// 创建数据源  工厂模式 ----&gt; 创建</span></span><br><span class="line">            DataSource dataSource = BasicDataSourceFactory.createDataSource(properties);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dataSource.getConnection();   <span class="comment">// 从数据源中获取连接</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//释放连接资源</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection conn, Statement st, ResultSet rs)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(st!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                st.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(conn!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



<p>写测试代码</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDBCP</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = jdbcUtils_dbcp.getConnection(); <span class="comment">//获取连接</span></span><br><span class="line">            st = conn.createStatement();  <span class="comment">//创建Statement对象</span></span><br><span class="line">            String sql = <span class="string">"INSERT INTO users (id,`NAME`,`PASSWORD`,`email`,`birthday`)\n"</span> +</span><br><span class="line">                    <span class="string">"VALUES(6,'wangchen2','123456','3247829@qq.com','2021-1-1')\n"</span>;</span><br><span class="line">            <span class="keyword">int</span> i =  st.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123; <span class="comment">//如果数据大于0</span></span><br><span class="line">                System.out.println(<span class="string">"插入成功！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            jdbcUtils_dbcp.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>





<blockquote>
<p>C3P0</p>
</blockquote>
<p>c3p0-0.9.5.5 mchange-commons-java-0.2.19</p>
<p>下载网址：<span class="exturl"><a class="exturl__link"   href="https://sourceforge.net/directory/internet/www/?q=c3p0-0.9.5.5.jar"  target="_blank" rel="noopener">https://sourceforge.net/directory/internet/www/?q=c3p0-0.9.5.5.jar</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
<figure class="highlight"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;c3p0-config&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">c3p0的缺省（默认）配置</span><br><span class="line">如果在代码中<span class="string">"ComboPooledDataSource ds=new ComboPooledDataSource();"</span>这样写就表示使用的是c3p0的缺省（默认）--&gt;</span><br><span class="line">    &lt;<span class="keyword">default</span>-config&gt;</span><br><span class="line">        &lt;property name="driverClass"&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;</span><br><span class="line">        &lt;property name=<span class="string">"jdbcUrl"</span>&gt;jdbc:mysql:<span class="comment">//localhost:3306/jdbcstudy?userUnicode=true&amp;amp;characterEncoding=utf8&amp;amp;uesSSL=true&amp;amp;serverTimezone=UTC&lt;/property&gt;</span></span><br><span class="line">        &lt;property name="user"&gt;root&lt;/property&gt;</span><br><span class="line">        &lt;property name="password"&gt;123456&lt;/property&gt;</span><br><span class="line">        &lt;property name="acquireIncrement"&gt;5&lt;/property&gt;</span><br><span class="line">        &lt;property name="initialPoolSize"&gt;10&lt;/property&gt;</span><br><span class="line">        &lt;property name="minPoolSize"&gt;5&lt;/property&gt;</span><br><span class="line">        &lt;property name="maxPoolSize"&gt;20&lt;/property&gt;</span><br><span class="line">    &lt;/default-config&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">   C3P0的命名配置</span><br><span class="line">   如果在代码中<span class="string">"ComboPooledDataSource ds = new ComboPolleDataSource("</span>MySQL<span class="string">")"</span>这样写就表示使用的时name</span><br><span class="line">   --&gt;</span><br><span class="line">    &lt;name-config name=<span class="string">"MySQL"</span>&gt;</span><br><span class="line">        &lt;property name="driverClass"&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;</span><br><span class="line">        &lt;property name=<span class="string">"dbcUrl"</span>&gt;jdbc:mysql:<span class="comment">//localhost:3306/jdbcstudy?userUnicode=true&amp;amp;characterEncoding=utf8&amp;amp;uesSSL=true&amp;amp;serverTimezone=UTC"&gt;&lt;/property&gt;</span></span><br><span class="line">        &lt;property name="user"&gt;root&lt;/property&gt;</span><br><span class="line">        &lt;property name="password"&gt;123456&lt;/property&gt;</span><br><span class="line">        &lt;property name="acquireIncrement"&gt;5&lt;/property&gt;</span><br><span class="line">        &lt;property name="initialPoolSize"&gt;10&lt;/property&gt;</span><br><span class="line">        &lt;property name="minPoolSize"&gt;5&lt;/property&gt;</span><br><span class="line">        &lt;property name="maxPoolSize"&gt;20&lt;/property&gt;</span><br><span class="line">    &lt;/name-config&gt;</span><br><span class="line">    &lt;/c3p0-config&gt;</span><br></pre></td></tr></table></div></figure>



<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.lesson05.utils;</span><br><span class="line"><span class="keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp.BasicDataSourceFactory;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcUtils_C3P0</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span> ComboPooledDataSource dataSource = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//            //代码版配置</span></span><br><span class="line"><span class="comment">//            dataSource = new ComboPooledDataSource();</span></span><br><span class="line"><span class="comment">//            dataSource.setUser();</span></span><br><span class="line"><span class="comment">//            dataSource.setPassword();</span></span><br><span class="line"><span class="comment">//            dataSource.setPassword();</span></span><br><span class="line"><span class="comment">//            dataSource.setJdbcUrl();</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//            dataSource.setMaxPoolSize();</span></span><br><span class="line"><span class="comment">//            dataSource.setMinPoolSize();</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">                <span class="comment">// 创建数据源  工厂模式 ---》创建</span></span><br><span class="line">          dataSource = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">"MySQL"</span>);<span class="comment">//配置文件写法</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//获取连接</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span>  <span class="keyword">static</span>  Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dataSource.getConnection(); <span class="comment">//数据源自带连接</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//释放连接资源</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection conn, Statement st, ResultSet rs)</span></span>&#123;</span><br><span class="line">        <span class="comment">//顺序为倒着关闭资源</span></span><br><span class="line">       <span class="keyword">if</span>(rs!=<span class="keyword">null</span>)&#123;</span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               rs.close();</span><br><span class="line">           &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span>(st!=<span class="keyword">null</span>)&#123;</span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               st.close();</span><br><span class="line">           &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">if</span>(conn!=<span class="keyword">null</span>)&#123;</span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               conn.close();</span><br><span class="line">           &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure>



<p>测试：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.kuang.lesson05;</span><br><span class="line"><span class="keyword">import</span> com.kuang.lesson05.utils.JdbcUtils_C3P0;</span><br><span class="line"><span class="keyword">import</span> com.kuang.lesson05.utils.JdbcUtils_DBCP;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestC3P0</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement st = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils_C3P0.getConnection();<span class="comment">//原来是自己实现的，现在用别人实现的</span></span><br><span class="line">            <span class="comment">// 区别</span></span><br><span class="line">            <span class="comment">//使用? 占位符代替参数</span></span><br><span class="line">            String sql = <span class="string">"insert into users(id,`NAME`,`PASSWORD`,`email`,`birthday`)values(?,?,?,?,?)"</span> ;</span><br><span class="line">            st = conn.prepareStatement(sql);<span class="comment">//预编译SQL，先写sql,然后不执行</span></span><br><span class="line">            <span class="comment">//手动给参数赋值 1:代表第一个问号  插入4号</span></span><br><span class="line">            st.setInt(<span class="number">1</span>,<span class="number">5</span>);<span class="comment">//id</span></span><br><span class="line">            st.setString(<span class="number">2</span>,<span class="string">"qinjiang"</span>);</span><br><span class="line">            st.setString(<span class="number">3</span>,<span class="string">"1234112"</span>);</span><br><span class="line">            st.setString(<span class="number">4</span>,<span class="string">"24734673@qq.com"</span>);</span><br><span class="line">            <span class="comment">//注意点：sql.Date  数据库用的   java.sql.Date</span></span><br><span class="line">            <span class="comment">//util.Date Java用的   new Date().getTime() 获得时间戳</span></span><br><span class="line">            st.setDate(<span class="number">5</span>,<span class="keyword">new</span> java.sql.Date(<span class="keyword">new</span> java.util.Date().getTime()));</span><br><span class="line">            <span class="comment">//执行  没有直接调用sql</span></span><br><span class="line">            <span class="keyword">int</span> i = st.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span> (i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">"插入成功!"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils_C3P0.release(conn,st,<span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>





<p><strong>无论使用什么数据源，本质还是一样的，Datasource接口不会变，方法就不会变</strong></p>
<p>业务级别的mysql</p>
<p>运维级别的mysql</p>
</div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ END ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">Author: </span><span class="copyright-author__value"><a href="https://kingsirz123.github.io">源一</a></span></div><div class="copyright-link"><span class="copyright-link__name">Link: </span><span class="copyright-link__value"><a href="https://kingsirz123.github.io/2021/04/25/MySQL%E5%AD%A6%E4%B9%A0/">https://kingsirz123.github.io/2021/04/25/MySQL%E5%AD%A6%E4%B9%A0/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">Copyright: </span><span class="copyright-notice__value">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> unless stating additionally</span></div></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2021/05/18/JavaWeb/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">JavaWeb</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2021/04/16/JavaScript/"><span class="paginator-prev__text">JavaScript</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">Catalog</span><span class="sidebar-nav-ov">Overview</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL"><span class="toc-number">1.</span> <span class="toc-text">
          MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-数据库"><span class="toc-number">1.1.</span> <span class="toc-text">
          1.数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1数据库（DB，DateBase）"><span class="toc-number">1.1.1.</span> <span class="toc-text">
          1.1数据库（DB，DateBase）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-数据库分类"><span class="toc-number">1.1.2.</span> <span class="toc-text">
          1.2 数据库分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#关系型数据库：（SQL）"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">
          关系型数据库：（SQL）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#非关系型数据库：-NoSQL-Not-Only"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">
          非关系型数据库：(NoSQL) Not Only</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-DBMS-数据库管理系统"><span class="toc-number">1.1.3.</span> <span class="toc-text">
          1.3 DBMS(数据库管理系统)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-MySQL"><span class="toc-number">1.1.4.</span> <span class="toc-text">
          1.4 MySQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5连接数据库"><span class="toc-number">1.1.5.</span> <span class="toc-text">
          1.5连接数据库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-操作数据库"><span class="toc-number">1.2.</span> <span class="toc-text">
          2. 操作数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-操作数据库"><span class="toc-number">1.2.1.</span> <span class="toc-text">
          2.1 操作数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-数据库的列类型"><span class="toc-number">1.2.2.</span> <span class="toc-text">
          2.2 数据库的列类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-数据库的字段属性（重点）"><span class="toc-number">1.2.3.</span> <span class="toc-text">
          2.3 数据库的字段属性（重点）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4创建数据库"><span class="toc-number">1.2.4.</span> <span class="toc-text">
          2.4创建数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-常用命令"><span class="toc-number">1.2.5.</span> <span class="toc-text">
          2.5 常用命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-数据表的类型"><span class="toc-number">1.2.6.</span> <span class="toc-text">
          2.6 数据表的类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-修改删除表"><span class="toc-number">1.2.7.</span> <span class="toc-text">
          2.6 修改删除表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#修改"><span class="toc-number">1.2.7.1.</span> <span class="toc-text">
          修改</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-MySQL数据管理"><span class="toc-number">1.3.</span> <span class="toc-text">
          3. MySQL数据管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-外键"><span class="toc-number">1.3.1.</span> <span class="toc-text">
          3.1 外键</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#方式一、在创建表的时候，增加约束-（麻烦，比较复杂）"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">
          方式一、在创建表的时候，增加约束 （麻烦，比较复杂）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#方式二、在创建表成功后，增加约束"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">
          方式二、在创建表成功后，增加约束</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2DML语言（全记）"><span class="toc-number">1.3.2.</span> <span class="toc-text">
          3.2DML语言（全记）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3添加"><span class="toc-number">1.3.3.</span> <span class="toc-text">
          3.3添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4修改"><span class="toc-number">1.3.4.</span> <span class="toc-text">
          3.4修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-删除"><span class="toc-number">1.3.5.</span> <span class="toc-text">
          3.5 删除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-DQL查询数据（最重点）"><span class="toc-number">1.4.</span> <span class="toc-text">
          4.DQL查询数据（最重点）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-DQL"><span class="toc-number">1.4.1.</span> <span class="toc-text">
          4.1 DQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-SELECT语法"><span class="toc-number">1.4.2.</span> <span class="toc-text">
          4.2 SELECT语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-指定查询字段"><span class="toc-number">1.4.3.</span> <span class="toc-text">
          4.3 指定查询字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-去重-distinct"><span class="toc-number">1.4.4.</span> <span class="toc-text">
          4.4 去重 distinct</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-数据库的列（表达式）"><span class="toc-number">1.4.5.</span> <span class="toc-text">
          4.5 数据库的列（表达式）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-where-条件子句"><span class="toc-number">1.4.6.</span> <span class="toc-text">
          4.6 where 条件子句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-模糊查询：-比较运算符"><span class="toc-number">1.4.7.</span> <span class="toc-text">
          4.7 模糊查询： 比较运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-联表查询join"><span class="toc-number">1.4.8.</span> <span class="toc-text">
          4.8 联表查询join</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-9-自连接"><span class="toc-number">1.4.9.</span> <span class="toc-text">
          4.9 自连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-10-分页"><span class="toc-number">1.4.10.</span> <span class="toc-text">
          4.10 分页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-11-子查询"><span class="toc-number">1.4.11.</span> <span class="toc-text">
          4.11 子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-12分组和过滤"><span class="toc-number">1.4.12.</span> <span class="toc-text">
          4.12分组和过滤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-MySQL函数"><span class="toc-number">1.5.</span> <span class="toc-text">
          5.MySQL函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1常用函数"><span class="toc-number">1.5.1.</span> <span class="toc-text">
          5.1常用函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2聚合函数（常用）"><span class="toc-number">1.5.2.</span> <span class="toc-text">
          5.2聚合函数（常用）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3数据库级别的MD5加密（扩展）"><span class="toc-number">1.5.3.</span> <span class="toc-text">
          5.3数据库级别的MD5加密（扩展）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-事务"><span class="toc-number">1.6.</span> <span class="toc-text">
          6.事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1什么是事务"><span class="toc-number">1.6.1.</span> <span class="toc-text">
          6.1什么是事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2执行事务"><span class="toc-number">1.6.2.</span> <span class="toc-text">
          6.2执行事务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#模拟场景"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">
          模拟场景</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-索引"><span class="toc-number">1.7.</span> <span class="toc-text">
          7.索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-索引的分类"><span class="toc-number">1.7.1.</span> <span class="toc-text">
          7.1 索引的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-测试索引"><span class="toc-number">1.7.2.</span> <span class="toc-text">
          7.2 测试索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3索引原则"><span class="toc-number">1.7.3.</span> <span class="toc-text">
          7.3索引原则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-数据库备份"><span class="toc-number">1.8.</span> <span class="toc-text">
          8.数据库备份</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1用户管理"><span class="toc-number">1.8.1.</span> <span class="toc-text">
          8.1用户管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-MySQL备份"><span class="toc-number">1.8.2.</span> <span class="toc-text">
          8.2 MySQL备份</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-statement-对象"><span class="toc-number">1.8.3.</span> <span class="toc-text">
          11.4 statement 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#编写工具类"><span class="toc-number">1.8.3.1.</span> <span class="toc-text">
          编写工具类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-5-SQL注入问题"><span class="toc-number">1.8.4.</span> <span class="toc-text">
          11.5 SQL注入问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-PreparedStatement-对象"><span class="toc-number">1.8.5.</span> <span class="toc-text">
          11.6 PreparedStatement 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-7-在IDEA上链接数据库"><span class="toc-number">1.8.6.</span> <span class="toc-text">
          11.7 在IDEA上链接数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-8事务"><span class="toc-number">1.8.7.</span> <span class="toc-text">
          11.8事务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ACID原则"><span class="toc-number">1.8.7.1.</span> <span class="toc-text">
          ACID原则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#隔离性的问题"><span class="toc-number">1.8.7.2.</span> <span class="toc-text">
          隔离性的问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#代码实现"><span class="toc-number">1.8.7.3.</span> <span class="toc-text">
          代码实现</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-9数据库连接池"><span class="toc-number">1.8.8.</span> <span class="toc-text">
          11.9数据库连接池</span></a></li></ol></li></ol></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="/images/icons/3.jpeg" alt="avatar"></div><p class="sidebar-ov-author__text">一生中你唯一需要回头的时候，是为了看自己到底走了多远。</p></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="https://github.com/KingSirZ123/" target="_blank" rel="noopener" data-popover="Github" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-github"></i></span></a><a class="sidebar-ov-social-item" href="https://plus.google.com/" target="_blank" rel="noopener" data-popover="Google" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-google"></i></span></a><a class="sidebar-ov-social-item" href="https://twitter.com/" target="_blank" rel="noopener" data-popover="Twitter" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-twitter"></i></span></a><a class="sidebar-ov-social-item" href="https://youtube.com/" target="_blank" rel="noopener" data-popover="Youtube" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-youtube"></i></span></a></div><div class="sidebar-ov-state"><a class="sidebar-ov-state-item sidebar-ov-state-item--posts" href="/archives/"><div class="sidebar-ov-state-item__count">62</div><div class="sidebar-ov-state-item__name">Archives</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--categories" href="/categories/"><div class="sidebar-ov-state-item__count">0</div><div class="sidebar-ov-state-item__name">Categories</div></a><a class="sidebar-ov-state-item sidebar-ov-state-item--tags" href="/tags/"><div class="sidebar-ov-state-item__count">0</div><div class="sidebar-ov-state-item__name">Tags</div></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">You have read </span><span class="sidebar-reading-info__num">0</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2020.7.19~2021</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>你好世界</span></div><div><span>Theme - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.1.1</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.1.1"></script><script src="/js/stun-boot.js?v=2.1.1"></script><script src="/js/scroll.js?v=2.1.1"></script><script src="/js/header.js?v=2.1.1"></script><script src="/js/sidebar.js?v=2.1.1"></script></body></html>